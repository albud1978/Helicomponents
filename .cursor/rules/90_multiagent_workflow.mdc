---
description: Multi-agent workflow (task slicing + ownership + RACI)
globs:
  - "**/*"
alwaysApply: false
---

# Multi-agent workflow

## Правило разреза
- Один todo = одна подсистема = один агент = минимальный дифф.
- Агент не меняет файлы вне своей зоны; при необходимости — эскалация в план.

## Ownership по путям
- sim_v2/RTC: `code/sim_v2/**`
- MP2/экспорт: `**mp2**` и связанные постпроцессы
- Validation: `code/analysis/sim_validation_*` и `docs/validation.md`
- Docs: `docs/**` и `README.md`

## Роли и ответственности
- Архитектор/планировщик: фиксирует решение, границы изменений и риски; утверждает “контракт проверки” и место фиксации (validation/changelog/architecture/README); интегратор мерджа.
- Исполнитель: реализует строго по брифу; сдаёт отчёт: что изменено, что не трогали, что проверить (1–3 пункта), риски.
- Ревьюер: статический контроль (правила `.mdc`, инварианты, порядок слоёв, ownership, ссылки/доки).
- Верификатор: фактический контроль (SQL/сценарии/результаты), без подмены рассуждениями.

## Контракт задачи (в plan-файле)
- Первая секция плана: цель, scope, non-goals, инварианты, критерии успеха, ownership, порядок мерджа.

## Изменения правил
- Изменения `.mdc`: утверждает архитектор, предлагает исполнитель, проверяет ревьюер.

# üîç –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤: –ü–æ—á–µ–º—É –Ω–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã –Ω–µ –≤—Ö–æ–¥—è—Ç –≤ operations

**–î–∞—Ç–∞:** 08-10-2025  
**–ü—Ä–æ–≥–æ–Ω:** 300 –¥–Ω–µ–π —Å spawn –Ω–∞ Day 226

---

## üìä –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Ö–æ–¥–∫–∏

### 1. **Spawn —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**

```
Day 226:
  [SPAWN MGR Day 226] need=7, next_idx=279->286, next_acn=100000->100007
  [SPAWN Day 226] Creating AC 100000 (idx 279), state=serviceable, intent=2
  [SPAWN Day 226] Creating AC 100001 (idx 280), state=serviceable, intent=2
  ...
  [SPAWN Day 226] Creating AC 100006 (idx 285), state=serviceable, intent=2
```

‚úÖ **7 –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω—ã** —Å idx=279-285, ACN=100000-100006  
‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ: `serviceable`  
‚úÖ Intent: `2` (—Ö–æ—Ç—è—Ç –≤ operations)

---

### 2. **–ö–≤–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã –í –ö–û–ù–¶–ï –û–ß–ï–†–ï–î–ò**

```
Day 226:
  [PROMOTE P1‚Üí2] AC 22171 (idx 0): rank=0/20 serviceable->operations, deficit=20
  [PROMOTE P1‚Üí2] AC 22172 (idx 1): rank=1/20 serviceable->operations, deficit=20
  ...
  [PROMOTE P1‚Üí2] AC 22251 (idx 15): rank=15/20 serviceable->operations, deficit=20
  
  [PROMOTE P1 REJECT] AC 100000 (idx 279): rank=279 >= K=20, staying in serviceable
  [PROMOTE P1 REJECT] AC 100001 (idx 280): rank=280 >= K=20, staying in serviceable
  ...
  [PROMOTE P1 REJECT] AC 100006 (idx 285): rank=285 >= K=20, staying in serviceable
```

### üî¥ **–ü–†–û–ë–õ–ï–ú–ê:**

1. **Deficit = 20** (–Ω—É–∂–Ω–æ 20 –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–º–æ—É—Ç–∞)
2. **K = 20** (–∫–≤–æ—Ç–∞ –Ω–∞ –ø—Ä–æ–º–æ—É—Ç = deficit)
3. **–†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ FCFS –ø–æ idx:**
   - –°—Ç–∞—Ä—ã–µ –∞–≥–µ–Ω—Ç—ã: idx 0-278 (—Å–æ–∑–¥–∞–Ω—ã –∏–∑ MP3)
   - –ù–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã: idx 279-285 (—Å–æ–∑–¥–∞–Ω—ã —á–µ—Ä–µ–∑ spawn)
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ë–µ—Ä—É—Ç—Å—è –ø–µ—Ä–≤—ã–µ 20 –∏–∑ –æ—á–µ—Ä–µ–¥–∏ serviceable (idx 0-19)
   - –ù–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã —Å idx=279-285 –Ω–∞—Ö–æ–¥—è—Ç—Å—è –Ω–∞ –ø–æ–∑–∏—Ü–∏—è—Ö 279-285
   - rank=279 >= K=20 ‚Üí **REJECT!**

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

### –¢–µ–∫—É—â–µ–µ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ (FCFS):

```cpp
// –í rtc_quota_promote_serviceable.py:
unsigned int rank = 0u;
for (unsigned int i = 0u; i < max_frames; ++i) {
    if (FLAMEGPU->agent(i).getVariable<unsigned int>("intent_state") == 2u) {
        if (i < idx) {
            ++rank;  // –°—á–∏—Ç–∞–µ–º –≤—Å–µ—Ö –î–û –º–µ–Ω—è –ø–æ idx
        }
    }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–¥—ë—Ç –ø–æ **–ø–æ–∑–∏—Ü–∏–∏ –≤ –º–∞—Å—Å–∏–≤–µ (idx)**, –∞ –ù–ï –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∏–ª–∏ –¥—Ä—É–≥–æ–º—É –∫—Ä–∏—Ç–µ—Ä–∏—é.

**–°–ª–µ–¥—Å—Ç–≤–∏–µ:**
- –°—Ç–∞—Ä—ã–µ –∞–≥–µ–Ω—Ç—ã (–∏–∑ MP3) –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–≤—ã–µ: idx=0..278
- –ù–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã (spawn) –≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ: idx=279+
- –ü—Ä–∏ –º–∞–ª–æ–º deficit –Ω–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã –ù–ò–ö–û–ì–î–ê –Ω–µ –ø—Ä–æ–π–¥—É—Ç –∫–≤–æ—Ç—É

---

## üìà –ß–∏—Å–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|----------|-------------|
| **–í—Å–µ–≥–æ –∞–≥–µ–Ω—Ç–æ–≤ serviceable** | ~112-124 | –ò–∑ –ª–æ–≥–æ–≤ |
| **Deficit (Day 226)** | 20 | –ù—É–∂–Ω–æ –ø—Ä–æ–º–æ—É—Ç–∏—Ç—å 20 –∞–≥–µ–Ω—Ç–æ–≤ |
| **–ù–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã (idx)** | 279-285 | 7 –∞–≥–µ–Ω—Ç–æ–≤ |
| **Rank –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤** | 279-285 | –í –∫–æ–Ω—Ü–µ –æ—á–µ—Ä–µ–¥–∏ |
| **K (–∫–≤–æ—Ç–∞)** | 20 | deficit |
| **–†–µ–∑—É–ª—å—Ç–∞—Ç** | rank >= K | **–í—Å–µ 7 –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã** |

---

## üîÑ –ü–æ—á–µ–º—É —ç—Ç–æ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å?

–î–µ–Ω—å –∑–∞ –¥–Ω—ë–º —Å–∏—Ç—É–∞—Ü–∏—è –ù–ï –º–µ–Ω—è–µ—Ç—Å—è:

```
Day 227-300:
  [PROMOTE P1 REJECT] AC 100000 (idx 279): rank=279 >= K=20-23
  [PROMOTE P1 REJECT] AC 100001 (idx 280): rank=280 >= K=20-23
  ...
```

**–ü—Ä–∏—á–∏–Ω–∞:** 
- Deficit –∫–æ–ª–µ–±–ª–µ—Ç—Å—è ~20-23
- –ù–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è —Å rank=279-285
- –£—Å–ª–æ–≤–∏–µ `rank < K` –ù–ò–ö–û–ì–î–ê –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

---

## üéØ –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã

### –≠—Ç–æ –ù–ï –ø—Ä–æ–±–ª–µ–º–∞ MP4 –∏–ª–∏ MP5!

MP4 –∫–≤–æ—Ç—ã **–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ** –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç–∞—Ç–∏—á–Ω—ã–º–∏.

### –≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ **FCFS —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ idx**!

**–ê–ª–≥–æ—Ä–∏—Ç–º FCFS –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω –¥–ª—è —Å—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã**, –Ω–æ –ù–ï —É—á–∏—Ç—ã–≤–∞–µ—Ç:
1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ (spawn)
2. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—é –Ω–æ–≤—ã—Ö vs —Å—Ç–∞—Ä—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
3. –í—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è –≤ serviceable

---

## üí° –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: **FCFS –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—Ö–æ–¥–∞ –≤ serviceable**
- –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∞–≥–µ–Ω—Ç–∞: `serviceable_since` (–¥–µ–Ω—å –≤—Ö–æ–¥–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
- –†–∞–Ω–∂–∏—Ä–æ–≤–∞—Ç—å –ø–æ `serviceable_since` –≤–º–µ—Å—Ç–æ `idx`
- –ù–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–∞—Ç—É –∏ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 2: **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º**
- –†–∞–∑–¥–µ–ª–∏—Ç—å –∞–≥–µ–Ω—Ç–æ–≤: "—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ" vs "–Ω–æ–≤—ã–µ" (spawn)
- –î–∞—Ç—å –Ω–æ–≤—ã–º –∞–≥–µ–Ω—Ç–∞–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∏–ª–∏ —á–∞—Å—Ç—å –∫–≤–æ—Ç—ã)
- –ù–∞–ø—Ä–∏–º–µ—Ä: 70% –∫–≤–æ—Ç—ã - —Å—Ç–∞—Ä—ã–µ, 30% - –Ω–æ–≤—ã–µ

### –í–∞—Ä–∏–∞–Ω—Ç 3: **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç rank**
- –°—á–∏—Ç–∞—Ç—å rank —Ç–æ–ª—å–∫–æ —Å—Ä–µ–¥–∏ –∞–≥–µ–Ω—Ç–æ–≤ –≤ serviceable
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—á—ë—Ç—á–∏–∫, –∞ –Ω–µ idx
- Rank –±—É–¥–µ—Ç 0..N, –≥–¥–µ N - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ serviceable

### –í–∞—Ä–∏–∞–Ω—Ç 4: **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ MP4**
- –ü—Ä–∏ spawn —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å target –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
- –ù–û: —ç—Ç–æ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –ø—Ä–∞–≤–∏–ª—É "MP4 —Å—Ç–∞—Ç–∏—á–Ω—ã"

---

## üèÅ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç 1 (FCFS –ø–æ –≤—Ä–µ–º–µ–Ω–∏)** - –Ω–∞–∏–±–æ–ª–µ–µ –æ—Ä–≥–∞–Ω–∏—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

1. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø FCFS
2. ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏–∫—É —Å–∏—Å—Ç–µ–º—ã
3. ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è MP4
4. ‚úÖ –ù–æ–≤—ã–µ –∞–≥–µ–Ω—Ç—ã –≤—Ö–æ–¥—è—Ç –≤ –æ–±—â—É—é –æ—á–µ—Ä–µ–¥—å "—á–µ—Å—Ç–Ω–æ"
5. ‚úÖ –î–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å `serviceable_since` –≤ spawn –∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö 2‚Üí3
- –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–º–æ—É—Ç-–º–æ–¥—É–ª—è—Ö
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 300+ –¥–Ω—è—Ö

---

**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–±–ª–µ–º–∞ **–∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞**, —Ä–µ—à–µ–Ω–∏–µ **–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ**  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å –ê–ª–µ–∫—Å–µ–µ–º –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç—É —Ä–µ—à–µ–Ω–∏—è


# Экспорт чата от 05-09-2025

## Основные темы чата
- Дополнение MP5/`flight_program_fl` новыми планёрами Ми‑17 по `MP4.new_counter_mi17`
- Финальный этап `program_fl_new_mi17_enricher.py` (без изменения рабочих шагов)
- `aircraft_number` в `flight_program_fl` → UInt32; генерация номеров с 100000 (`ac_type_mask=64`)
- Словарь `dict_aircraft_number_flat`: добавление только новых номеров с форматными полями
- Откат расширения `frames_index` (только MP3) и постановка P1‑задачи на динамическую размерность/экспорт

## Решенные задачи
- Реализован enricher для дозагрузки Ми‑17 в `flight_program_fl` и словарь
- Полный TEST‑extract прошёл; словарь включает парк из `heli_pandas` + новые номера
- Команды запуска добавлены в `docs/GPU.md` и `docs/README.md`

## Проблемы и их решения
- Пустые поля в словаре у новых номеров → вставка сразу с `formatted_number/registration_code/is_leading_zero`
- Риск зависимости `frames_total` от синтетических MP5 → откат объединения MP3∪MP5; зафиксирована P1‑идея динамического экспорта

## Изменения в коде
- `code/program_fl_new_mi17_enricher.py`: дозагрузка Ми‑17 (≥100000, mask=64) в FL и словарь
- `code/program_fl_direct_loader.py`: DDL `flight_program_fl` с `aircraft_number UInt32`
- `code/extract_master.py`: enricher перенесён в конец пайплайна
- `code/sim_env_setup.py`: `frames_index` строится только по MP3

## Обновления документации
- `docs/GPU.md`: добавлены команды запуска (TRUNCATE + 10 лет)
- `docs/README.md`: раздел с командами запуска
- `docs/Tasktracker.md`: добавлена P1‑задача о динамической размерности и экспорте (MultiBOM)

## Следующие шаги
- Реализовать динамическое формирование состава и экспорт «по факту» после прогона (P1)
- Учитывать MultiBOM: состав агентов известен только в процессе — собирать финальную экспортную таблицу по фактическим агентам
- Смоук‑прогон `sim_master` (30–60 суток) для проверки размерностей/экспорта

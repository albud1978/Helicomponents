# –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á—ë—Ç–∞ —Ä–µ–∑–µ—Ä–≤–∞ Spawn

## –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ (v2.0)

–§–æ—Ä–º—É–ª–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ä–µ–∑–µ—Ä–≤–∞ spawn-–∞–≥–µ–Ω—Ç–æ–≤ –∫–∞–∫ –¥–ª—è **–ø–ª–∞–Ω–µ—Ä–æ–≤**, —Ç–∞–∫ –∏ –¥–ª—è **–∞–≥—Ä–µ–≥–∞—Ç–æ–≤**.

### –í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ï–¥–∏–Ω–∏—Ü–∞ |
|----------|----------|---------|
| `total_flight` | –û–±—â–∏–π –Ω–∞–ª—ë—Ç –∑–∞ 10 –ª–µ—Ç | –º–∏–Ω—É—Ç—ã |
| `LL` | –ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å (Life Limit) | –º–∏–Ω—É—Ç—ã |
| `OH` | –ú–µ–∂—Ä–µ–º–æ–Ω—Ç–Ω—ã–π —Ä–µ—Å—É—Ä—Å (Overhaul) | –º–∏–Ω—É—Ç—ã |
| `repair_time` | –í—Ä–µ–º—è —Ä–µ–º–æ–Ω—Ç–∞ | –¥–Ω–∏ |

### –ê–ª–≥–æ—Ä–∏—Ç–º

```
–ï–°–õ–ò OH = 0 –ò–õ–ò OH >= LL:
    # –ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º—É–ª–∞ (–¥–ª—è –ø–ª–∞–Ω–µ—Ä–æ–≤)
    reserve = round(total_flight / LL √ó 1.2)
    
–ò–ù–ê–ß–ï:
    # –§–æ—Ä–º—É–ª–∞ —Å —É—á—ë—Ç–æ–º —Ä–µ–º–æ–Ω—Ç–æ–≤ (–¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤)
    
    # 1. –í—Å–µ–≥–æ –≤—ã—Ö–æ–¥–æ–≤ –∏–∑ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ (–ø–æ OH)
    total_exits = total_flight / OH
    
    # 2. –°–ø–∏—Å–∞–Ω–∏—è (–∫–æ–Ω–µ—Ü –∂–∏–∑–Ω–∏): –¥–æ–ª—è OH/LL
    permanent_exits = total_exits √ó (OH / LL)
    
    # 3. –†–µ–º–æ–Ω—Ç—ã (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤—ã–±—ã—Ç–∏–µ): (1 - OH/LL)
    repairs_count = total_exits √ó (1 - OH / LL)
    
    # 4. –ë—É—Ñ–µ—Ä –Ω–∞ –≤—Ä–µ–º—è —Ä–µ–º–æ–Ω—Ç–∞ (—Å–∫–æ–ª—å–∫–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ —Ä–µ–º–æ–Ω—Ç–µ –∑–∞ –≥–æ–¥)
    annual_repairs = repairs_count / 10
    repair_buffer = annual_repairs √ó (repair_time / 365) √ó 1.2
    
    # 5. –ò—Ç–æ–≥–æ
    average_exits = permanent_exits + repair_buffer
    reserve = round(average_exits √ó 1.2)
```

### –ú—É–ª—å—Ç–∏–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞

–ï—Å–ª–∏ –≤ –≥—Ä—É–ø–ø–µ (`group_by`) –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã—Ö –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä (`partseqno`) —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏:

```
reserve_group = MAX(reserve_nomenclature_1, reserve_nomenclature_2, ...)
```

–ë–µ—Ä—ë—Ç—Å—è **–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–∑–µ—Ä–≤** —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä –≥—Ä—É–ø–ø—ã, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ "—Ö—É–¥—à–µ–≥–æ —Å–ª—É—á–∞—è".

---

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á—ë—Ç–∞

### –ü—Ä–∏–º–µ—Ä 1: –ü–ª–∞–Ω–µ—Ä—ã Mi-17 (–±–µ–∑ —Ä–µ–º–æ–Ω—Ç–∞)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| n_planers | 116 |
| LL | 35,000—á = 2,100,000 –º–∏–Ω |
| OH | 0 (–ø–ª–∞–Ω–µ—Ä—ã –Ω–µ —Ä–µ–º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è) |
| simulation_days | 4000 |
| avg_daily_flight | 90 –º–∏–Ω |

```
total_flight = 116 √ó 4000 √ó 90 = 41,760,000 –º–∏–Ω
reserve = round(41,760,000 / 2,100,000 √ó 1.2) = round(23.9) = 24
```

### –ü—Ä–∏–º–µ—Ä 2: –î–≤–∏–≥–∞—Ç–µ–ª–∏ –¢–í3-117 (—Å —Ä–µ–º–æ–Ω—Ç–æ–º)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| n_planers | 116 Mi-17 |
| LL | 12,000—á = 720,000 –º–∏–Ω |
| OH | 1,500—á = 90,000 –º–∏–Ω |
| repair_time | 221 –¥–Ω–µ–π |
| simulation_days | 3650 (10 –ª–µ—Ç) |

```
total_flight = 116 √ó 3650 √ó 90 = 38,106,000 –º–∏–Ω

total_exits = 38,106,000 / 90,000 = 423
permanent_exits = 423 √ó (90,000 / 720,000) = 423 √ó 0.125 = 53
repairs_count = 423 √ó (1 - 0.125) = 423 √ó 0.875 = 370

annual_repairs = 370 / 10 = 37
repair_buffer = 37 √ó (221 / 365) √ó 1.2 = 37 √ó 0.605 √ó 1.2 = 27

average_exits = 53 + 27 = 80
reserve = round(80 √ó 1.2) = 96
```

### –ü—Ä–∏–º–µ—Ä 3: –î–≤–∏–≥–∞—Ç–µ–ª–∏ –¢–í2-117 (—Å —Ä–µ–º–æ–Ω—Ç–æ–º)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| n_planers | 163 Mi-8 |
| LL | 12,000—á = 720,000 –º–∏–Ω |
| OH | 1,500—á = 90,000 –º–∏–Ω |
| repair_time | 151 –¥–µ–Ω—å |

```
total_flight = 163 √ó 3650 √ó 90 = 53,528,500 –º–∏–Ω

total_exits = 53,528,500 / 90,000 = 595
permanent_exits = 595 √ó 0.125 = 74
repairs_count = 595 √ó 0.875 = 521

annual_repairs = 521 / 10 = 52
repair_buffer = 52 √ó (151 / 365) √ó 1.2 = 52 √ó 0.414 √ó 1.2 = 26

average_exits = 74 + 26 = 100
reserve = round(100 √ó 1.2) = 120
```

---

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –î–ª—è –ø–ª–∞–Ω–µ—Ä–æ–≤ (`sim_env_setup.py`)

```python
def calculate_spawn_reserve_universal(
    total_flight_minutes: float,
    ll_minutes: int,
    oh_minutes: int = 0,
    repair_time_days: int = 0,
    safety_margin: float = 1.2
) -> int:
    # ... —Å–º. –∫–æ–¥ –≤ sim_env_setup.py
```

### –î–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ (`agent_population_units.py`)

```python
def _calculate_spawn_reserve(self, group_counts: Dict[int, int]) -> int:
    # –î–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã:
    # 1. –ü–æ–ª—É—á–∞–µ–º –í–°–ï –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã –≥—Ä—É–ø–ø—ã
    # 2. –î–ª—è –ö–ê–ñ–î–û–ô –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã —Å—á–∏—Ç–∞–µ–º —Ä–µ–∑–µ—Ä–≤
    # 3. –ë–µ—Ä—ë–º –ú–ê–ö–°–ò–ú–£–ú –∏–∑ –≤—Å–µ—Ö –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä –≥—Ä—É–ø–ø—ã
    # ... —Å–º. –∫–æ–¥ –≤ agent_population_units.py
```

---

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –î–∞—Ç–∞ | –í–µ—Ä—Å–∏—è | –ò–∑–º–µ–Ω–µ–Ω–∏–µ |
|------|--------|-----------|
| 2026-01-09 | v1.0 | –ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º—É–ª–∞: `total_flight / LL √ó 1.2` |
| 2026-01-09 | v2.0 | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ —Å —É—á—ë—Ç–æ–º OH –∏ repair_time |
| 2026-01-09 | v2.1 | –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º—É–ª—å—Ç–∏–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã (MAX –ø–æ –≥—Ä—É–ø–ø–µ) |

---

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏–º—É–ª—è—Ü–∏–∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

```
üìà –¢–æ–ø-5 –≥—Ä—É–ø–ø –ø–æ —Ä–µ–∑–µ—Ä–≤—É (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ + –º—É–ª—å—Ç–∏–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞):
   group_by=4 (2 –Ω–æ–º–µ–Ω–∫–ª.): exist=384, reserve=131, LL=7500—á, OH=1500—á, RT=221–¥–Ω
      ‚Üí exits=423, perm=84, repairs=338, buf=24

üîÄ –ú—É–ª—å—Ç–∏–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ (N –≥—Ä—É–ø–ø):
   group_by=4: 3 –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä ‚Üí reserve=131 (best: PSN=12345, LL=7500—á, OH=1500—á, RT=221–¥–Ω)
```









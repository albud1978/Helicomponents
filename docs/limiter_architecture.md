# LIMITER Architecture (V8 â€” RepairLine)

> **ĞĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ:** V8 (16-01-2026)  
> **Ğ¤Ğ°Ğ¹Ğ» Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°:** `code/sim_v2/messaging/orchestrator_limiter_v8.py`
> **Ğ ĞµĞ·ĞµÑ€Ğ²Ğ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ:** V7 (`orchestrator_limiter_v7.py`)

---

## ğŸ”‘ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ ĞĞ«Ğ• Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ¯ V8 (ĞšĞĞĞĞ)

> **Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¸ÑÑ‚Ğ¸Ğ½Ñ‹ Ğ´Ğ»Ñ V8. Ğ›ÑĞ±Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ²Ğ¾Ñ€ĞµÑ‡Ğ¸Ñ Ğ² Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ… â€” ÑƒÑÑ‚Ğ°Ñ€ĞµĞ²ÑˆĞ¸Ğµ.**

| Ğ’Ğ¾Ğ¿Ñ€Ğ¾Ñ | V7 | V8 | ĞĞ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ V8 |
|--------|-----|-----|----------------|
| **ĞœĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼ Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ°** | exit_date Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ unsvc | RepairLine (free_days) | Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ Ğ¿ÑƒĞ», Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ»Ğ¸Ğ½Ğ¸Ğ¹ = repair_number Ğ¸Ğ· MP |
| **exit_date Ğ´Ğ»Ñ unsvc** | âœ… Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ | âŒ Ğ£Ğ”ĞĞ›ĞĞ | Ğ—Ğ°Ğ¼ĞµĞ½Ñ‘Ğ½ Ğ½Ğ° RepairLineâ€‘Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºÑƒ |
| **repair_days Ğ´Ğ»Ñ unsvc** | â€” | âœ… Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—Ğ£Ğ•Ğ¢Ğ¡Ğ¯ | unsvc Ğ´ĞµĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ repair_days Ğ´Ğ¾ 0; Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¸ÑĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ ÑƒĞ¶Ğµ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ `repair_line_id` |
| **repair_days Ğ´Ğ»Ñ inactive** | â€” | âœ… Ğ’Ğ¡Ğ•Ğ“Ğ”Ğ 0 | inactive Ğ½Ğµ Ğ´ĞµĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ |
| **unsvc Ğ² min_dynamic** | âœ… Ğ”Ğ° | âŒ ĞĞ•Ğ¢ | Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· RepairLine |
| **ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ Ñ€ĞµÑÑƒÑ€ÑĞ°** | post-increment (`sne += dt; if sne >= ll`) | next-day dt (`if sne + dt >= ll`) | ĞŸÑ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ½Ğ°Ğ»Ñ‘Ñ‚Ğ° |
| **limiter=0** | min(1, ...) Ğ² Python | **ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ñ…Ğ¾Ğ´** (Ğ¸Ğ½Ğ°Ñ‡Ğµ EXCEPTION) | Ğ“Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸ |
| **limiter Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ** | max(1, ...) | Ğ Ğ°Ğ·Ñ€ĞµÑˆÑ‘Ğ½ 0 | ĞšĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ñ RTC |

**âš ï¸ Ğ’ĞĞ–ĞĞ: V8 ĞĞ• ÑĞºĞ²Ğ¸Ğ²Ğ°Ğ»ĞµĞ½Ñ‚ĞµĞ½ V7 Ğ¿Ğ¾ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°Ğ¼ â€” ÑÑ‚Ğ¾ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ.**

**âš ï¸ ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ deterministic_dates:** `MAX_DETERMINISTIC_DATES=500`. ĞŸÑ€Ğ¸ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğ¸ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ° Ğ»Ğ¸ÑˆĞ½Ğ¸Ğµ Ğ´Ğ°Ñ‚Ñ‹ **Ğ¾Ñ‚Ğ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ÑÑ‚ÑÑ**, ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ½Ñ‹.

**âš ï¸ V8 ĞºĞ²Ğ¾Ñ‚Ñ‹ (ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ):** Ğ¾Ğ´Ğ¸Ğ½ QM ÑˆĞ»Ñ‘Ñ‚ broadcast Ñ‡ĞµÑ€ĞµĞ· MessageBucket (`QuotaBucket`), Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ÑÑ‚ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ rank.

### ĞšĞ°Ğ½Ğ¾Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ñ‹ V8
- `config/transitions/transitions_rules.json` â€” ĞµĞ´Ğ¸Ğ½Ğ°Ñ Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ğ° Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ² stateâ†’state
- `config/transitions/quota_rules.json` â€” Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° ĞºĞ²Ğ¾Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (MessageBucket/RepairLine)
- `tools/transitions_viewer/index.html` â€” Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ² Ğ¸ ĞºĞ²Ğ¾Ñ‚

---

## ğŸ“Š Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° ÑĞ»Ğ¾Ñ‘Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ (Ñ„Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº V8)

> **âš ï¸ Ğ’ĞĞ–ĞĞ: ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº = Ñ…Ñ€Ğ¾Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ**
> 
> ĞĞ¾Ğ¼ĞµÑ€Ğ° (#) Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚ **Ğ¿Ğ¾Ñ€ÑĞ´ĞºÑƒ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ ÑĞ»Ğ¾Ñ‘Ğ² Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸** â€” Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ÑÑ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ğ² ÑÑ‚Ğ¾Ğ¼ Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞµ. Ğ­Ñ‚Ğ¾ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ğ°Ğ¶Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ°:
> 
> 1. **Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** â€” ÑĞ»Ğ¾Ğ¹ N Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ, Ğ·Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ½Ñ‹Ğµ ÑĞ»Ğ¾ĞµĞ¼ N-1
> 2. **Reset Ğ¿ĞµÑ€ĞµĞ´ ÑĞ±Ğ¾Ñ€Ğ¾Ğ¼** â€” `reset_exit_date` (â†’MAX) Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ”Ğ `copy_exit_date` (atomicMin), Ğ¸Ğ½Ğ°Ñ‡Ğµ Ğ¾ÑÑ‚Ğ°Ğ½ÑƒÑ‚ÑÑ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ³Ğ¾ ÑˆĞ°Ğ³Ğ°
> 3. **ĞšĞ²Ğ¾Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** â€” ÑÑ‚Ñ€Ğ¾Ğ³Ğ°Ñ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ: Ğ¿Ğ¾Ğ´ÑÑ‡Ñ‘Ñ‚ â†’ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ QM â†’ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğº Ğ°Ğ³ĞµĞ½Ñ‚Ğ°Ğ¼
> 4. **Adaptive steps** â€” Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸ `min_dynamic` Ğ¸ `deterministic_dates` Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ Ğ”Ğ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ `adaptive_days`

> **ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**
> - Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ `_stay` ÑƒĞ´Ğ°Ğ»ĞµĞ½Ñ‹ â€” FLAME GPU Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ² ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¸
> - `clear_limiter_on_exit` ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½ â€” Ğ¾Ğ±Ğ½ÑƒĞ»ĞµĞ½Ğ¸Ğµ ÑƒĞ¶Ğµ Ğ² Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑÑ… 2â†’3, 2â†’6, 2â†’7
> - `limiter_on_entry` ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½ â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ `limiter==0` (Ğ±ĞµĞ· intent)

| # | Ğ¡Ğ»Ğ¾Ğ¹ | Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ | State | Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° |
|---|------|---------|-------|--------|
| **Ğ¤ĞĞ—Ğ -1: Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Host)** |||||
| 0 | layer_init_mp5_cumsum | `HF_InitMP5Cumsum` | Host | Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ ĞºÑƒĞ¼ÑƒĞ»ÑÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ñ‡Ğ°ÑÑ‹ MP5 Ğ´Ğ»Ñ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚ĞµÑ€Ğ° |
| 1 | layer_init_repair_lines | `HF_InitRepairLines` | Host | Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ RepairLine Ğ¿Ğ¾ `repair_number` |
| **Ğ¤ĞĞ—Ğ 0: Ğ”ĞµÑ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹** |||||
| 2 | v8_repair_line_assign_repair | `rtc_repair_line_assign_repair_v8` | 4â†’4 | ĞŸÑ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğ»Ğ¸Ğ½Ğ¸Ğ¹ Ğ´Ğ»Ñ day0â€‘Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ° |
| 3 | v7_repair_to_svc | `rtc_repair_to_svc_v7` | 4â†’3 | Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğµ day0â€‘Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ° Ğ¿Ğ¾ `exit_date` |
| 4 | v7_spawn_to_ops | `rtc_spawn_to_ops_v7` | 5â†’2 | ĞŸĞ»Ğ°Ğ½Ğ¾Ğ²Ñ‹Ğ¹ spawn Ğ¿Ğ¾ `exit_date` |
| **Ğ¤ĞĞ—Ğ 0.5: Ğ¡Ğ±Ğ¾Ñ€ min_exit_date (ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ)** |||||
| 5 | v7_reset_exit_date | `rtc_reset_exit_date_v7` | QM | Ğ¡Ğ±Ñ€Ğ¾Ñ min_exit_date Ğ¿ĞµÑ€ĞµĞ´ ÑĞ±Ğ¾Ñ€Ğ¾Ğ¼ |
| 6 | v7_copy_exit_date_repair | `rtc_copy_exit_date_repair_v7` | 4 | Ğ¡Ğ±Ğ¾Ñ€ Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞ³Ğ¾ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ° Ğ¸Ğ· Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ° |
| 7 | v7_copy_exit_date_spawn | `rtc_copy_exit_date_spawn_v7` | 5 | Ğ¡Ğ±Ğ¾Ñ€ Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞ³Ğ¾ spawnâ€‘ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ |
| 8 | v7_copy_exit_date_unsvc | `rtc_copy_exit_date_unsvc_v7` | 7 | Ğ¡Ğ±Ğ¾Ñ€ exit_date Ğ¸Ğ· unsvc (Ğ² V8 Ğ½Ğµ Ğ²Ğ»Ğ¸ÑĞµÑ‚ Ğ½Ğ° ÑˆĞ°Ğ³) |
| **Ğ¤ĞĞ—Ğ 1: Operations Ğ¸ Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ½Ñ‹Ğµ ÑÑ‡Ñ‘Ñ‚Ñ‡Ğ¸ĞºĞ¸** |||||
| 9 | v8_ops_increment | `rtc_ops_increment_v8` | 2â†’2 | ĞĞ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ğ»Ñ‘Ñ‚Ğ° Ğ¸ Ñ€ĞµÑÑƒÑ€ÑĞ°, ÑˆĞ°Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ´ĞµĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚ĞµÑ€Ğ° |
| 10 | v8_unsvc_decrement | `rtc_unsvc_decrement_v8` | 7â†’7 | Ğ”ĞµĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚ `repair_days` Ğ´Ğ»Ñ unserviceable |
| 11 | v8_ops_to_storage | `rtc_ops_to_storage_v8` | 2â†’6 | Ğ¡Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ LL/BR |
| 12 | v8_ops_to_unsvc | `rtc_ops_to_unsvc_v8` | 2â†’7 | Ğ£Ñ…Ğ¾Ğ´ Ğ² unserviceable Ğ¿Ğ¾ OH (limiter=0 â†’ Ğ²Ñ‹Ñ…Ğ¾Ğ´) |
| **Ğ¤ĞĞ—Ğ 1.25: V8 preâ€‘quota adaptive (min_dynamic)** |||||
|  |  |  |  | `min_dynamic` ĞºĞ¾Ğ´Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ñ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ¼ (limiter/repair_days) Ğ´Ğ»Ñ ÑĞ²Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñ‹ ÑˆĞ°Ğ³Ğ° |
| 13 | v8_init | `HF_InitV8` | Host | ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° `deterministic_dates` Ğ¸ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ |
| 14 | v8_collect_min_ops | `rtc_collect_min_dynamic_ops_v8` | 2 | Ğ¡Ğ±Ğ¾Ñ€ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚ĞµÑ€Ğ° Ğ¿Ğ¾ ops |
| 15 | v8_collect_min_repair | `rtc_collect_min_dynamic_repair_v8` | 4 | Ğ¡Ğ±Ğ¾Ñ€ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… `repair_days` Ğ´Ğ»Ñ day0â€‘Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ° |
| 16 | v8_compute_global_min | `rtc_compute_global_min_v8` | QM | Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ `adaptive_days` Ğ¸ ÑĞ±Ñ€Ğ¾Ñ `min_dynamic` |
| **Ğ¤ĞĞ—Ğ 1.5: RepairLine (preâ€‘quota)** |||||
| 17 | v8_repair_line_sync_pre | `rtc_repair_line_sync_v8` | RepairLine | Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ»Ğ¸Ğ½Ğ¸Ğ¸ Ğ¸Ğ· MacroProperty |
| 18 | v8_repair_line_increment | `rtc_repair_line_increment_v8` | RepairLine | ĞĞ°Ñ€Ğ°Ñ‰Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ `free_days` Ğ½Ğ° ÑˆĞ°Ğ³ |
| 19 | v8_repair_line_write | `rtc_repair_line_write_v8` | RepairLine | Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ»Ğ¸Ğ½Ğ¸Ğ¹ Ğ² MacroProperty |
| 20 | v8_repair_line_publish_status | `rtc_repair_line_publish_status_v8` | RepairLine | Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ»Ğ¸Ğ½Ğ¸Ğ¹ Ğ² QM (Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ/Ğ·Ğ°Ğ½ÑÑ‚Ğ¾ÑÑ‚ÑŒ) |
| **Ğ¤ĞĞ—Ğ 2: ĞšĞ²Ğ¾Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ** |||||
| 21 | v8_reset_flags | `rtc_reset_flags_v7` | all | Ğ¡Ğ±Ñ€Ğ¾Ñ Ñ„Ğ»Ğ°Ğ³Ğ¾Ğ² Ğ¿Ñ€Ğ¾Ğ¼Ğ¾ÑƒÑ‚Ğ°/Ğ´ĞµĞ¼Ğ¾ÑƒÑ‚Ğ° |
| 22 | v8_reset_buffers | `rtc_reset_buffers_v7` | all | Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ±ÑƒÑ„ĞµÑ€Ğ¾Ğ² Ğ¿Ğ¾Ğ´ÑÑ‡Ñ‘Ñ‚Ğ° |
| 23 | v8_count_agents | `rtc_count_*` | all | ĞŸĞ¾Ğ´ÑÑ‡Ñ‘Ñ‚ Ğ¿Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸ÑĞ¼ + Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ unsvc/inactive |
| 24 | v8_repair_line_slots | `rtc_repair_line_slots_v8` | QM | Ğ¡Ğ±Ğ¾Ñ€ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ñ… RepairLineâ€‘ÑĞ»Ğ¾Ñ‚Ğ¾Ğ² |
| 25 | v8_debug_p2 | `rtc_quota_debug_p2_v8` | QM | Debugâ€‘Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ P2 (ops/target/deficit/needed/slots) |
| 26 | v8_demote | `rtc_demote_ops_v7` | QM | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ Ğ´ĞµĞ¼Ğ¾ÑƒÑ‚Ğ° opsâ†’svc |
| 27 | v8_promote_svc | `rtc_promote_svc_v7` | QM | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ P1: svcâ†’ops |
| 28 | v8_promote_unsvc_decide | `rtc_promote_unsvc_v8` | QM | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ P2: Ğ¾Ñ‚Ğ±Ğ¾Ñ€ unsvc Ğ¿Ğ¾ RepairLine (Ğ±ĞµĞ· Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ³Ğ¾ `repair_line_id`) |
| 29 | v8_promote_unsvc_commit | `rtc_promote_unsvc_commit_v8` | QM | Ğ‘Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ»Ğ¸Ğ½Ğ¸Ğ¸ Ğ¸ Ñ„Ğ¸ĞºÑĞ°Ñ†Ğ¸Ñ P2 (fallback Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑĞ»Ğ¾Ñ‚) |
| 30 | v8_promote_inactive_decide | `rtc_promote_inactive_v8` | QM | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ P3: Ğ¾Ñ‚Ğ±Ğ¾Ñ€ inactive Ğ¿Ğ¾ ÑƒÑĞ»Ğ¾Ğ²Ğ¸ÑĞ¼ RepairLine |
| 31 | v8_promote_inactive_commit | `rtc_promote_inactive_commit_v8` | QM | Ğ‘Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ»Ğ¸Ğ½Ğ¸Ğ¸ Ğ¸ Ñ„Ğ¸ĞºÑĞ°Ñ†Ğ¸Ñ P3 (fallback Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑĞ»Ğ¾Ñ‚) |
| **Ğ¤ĞĞ—Ğ 3: ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ ĞºĞ²Ğ¾Ñ‚** |||||
| 32 | v7_ops_demote | `rtc_ops_demote_v7` | 2â†’3 | ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ´ĞµĞ¼Ğ¾ÑƒÑ‚Ğ° |
| 33 | v7_svc_to_ops | `rtc_svc_to_ops_v7` | 3â†’2 | ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ P1 |
| 34 | v7_unsvc_to_ops | `rtc_unsvc_to_ops_v7` | 7â†’2 | ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ P2, Ğ¾Ğ±Ğ½ÑƒĞ»ĞµĞ½Ğ¸Ğµ PPR |
| 35 | v7_inactive_to_ops | `rtc_inactive_to_ops_v7` | 1â†’2 | ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ P3 |
| **Ğ¤ĞĞ—Ğ 3.5: RepairLine (postâ€‘quota)** |||||
| 36 | v8_repair_line_sync_post | `rtc_repair_line_sync_v8` | RepairLine | Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ»Ğ¸Ğ½Ğ¸Ğ¹ Ğ¿Ğ¾ÑĞ»Ğµ ĞºĞ²Ğ¾Ñ‚ |
| **Ğ¤ĞĞ—Ğ 4: Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ¿Ğ°Ğ²Ğ½** |||||
| 37 | v8_spawn_dynamic_mgr | `rtc_spawn_dynamic_mgr_v8` | SpawnMgr | Ğ”ĞµÑ„Ğ¸Ñ†Ğ¸Ñ‚ = target âˆ’ curr_ops âˆ’ used (P1/P2/P3 approve) |
| 38 | v8_spawn_dynamic_ticket | `rtc_spawn_dynamic_ticket_v7` | Ticketâ†’ops | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² |
| **Ğ¤ĞĞ—Ğ 5: Limiter (min_limiter)** |||||
| 39 | L_limiter_entry | `rtc_compute_limiter_on_entry` | 2â†’2 | ĞŸĞµÑ€ĞµÑÑ‡Ñ‘Ñ‚ limiter Ğ¿Ñ€Ğ¸ Ğ²Ñ…Ğ¾Ğ´Ğµ/Ğ½ÑƒĞ»ĞµĞ²Ğ¾Ğ¼ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¸ |
| 40 | L_limiter_min | `rtc_compute_min_limiter` | 2â†’2 | Ğ¡Ğ±Ğ¾Ñ€ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ limiter Ğ¿Ğ¾ ops |
| **Ğ¤ĞĞ—Ğ 6: Update day** |||||
| 41 | v8_update_day | `HF_UpdateDayV8` | Host | ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ `current_day` Ğ¿Ğ¾ `adaptive_days` |

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ V7

### ĞĞ´Ğ½Ğ¾Ñ„Ğ°Ğ·Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (Single-Phase)

**ĞšĞ»ÑÑ‡ĞµĞ²Ğ¾Ğµ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ¾Ñ‚ baseline:** ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ÑÑ **Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ** Ñ‡ĞµÑ€ĞµĞ· `setInitialState/setEndState` Ñ `FunctionCondition`, Ğ±ĞµĞ· Ğ¿Ñ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¹ `intent_state`.

```cpp
// V7: ĞŸÑ€ÑĞ¼Ğ¾Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ñ FunctionCondition
FLAMEGPU_AGENT_FUNCTION_CONDITION(cond_ops_to_unsvc_v7) {
    const unsigned int ppr = FLAMEGPU->getVariable<unsigned int>("ppr");
    const unsigned int oh = FLAMEGPU->getVariable<unsigned int>("oh");
    return ppr >= oh;  // Condition: PPR >= OH
}

FLAMEGPU_AGENT_FUNCTION(rtc_ops_to_unsvc_v7, ...) {
    // Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ exit_date Ğ´Ğ»Ñ Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ repair_time
    const unsigned int current_day = FLAMEGPU->environment.getProperty<unsigned int>("current_day");
    const unsigned int repair_time = FLAMEGPU->environment.getProperty<unsigned int>("mi17_repair_time_const");
    FLAMEGPU->setVariable<unsigned int>("exit_date", current_day + repair_time);
    // PPR ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ â€” Ğ¾Ğ±Ğ½ÑƒĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ğµ Ğ² ops (unsvcâ†’ops)
    return flamegpu::ALIVE;
}
// Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ: fn.setInitialState("operations"); fn.setEndState("unserviceable");
```

### Ğ”ĞµÑ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹

ĞĞ³ĞµĞ½Ñ‚Ñ‹ Ğ² `repair` (4) Ğ¸ `reserve` (5) Ğ¸Ğ¼ĞµÑÑ‚ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ `exit_date` â€” Ğ´ĞµĞ½ÑŒ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ° Ğ¸Ğ· ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ:

- **repair â†’ serviceable (4â†’3):** ĞŸÑ€Ğ¸ `current_day >= exit_date`
- **reserve â†’ operations (5â†’2):** ĞŸÑ€Ğ¸ `current_day >= exit_date` (Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²Ñ‹Ğ¹ spawn)

`exit_date` Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğ² Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ `adaptive_days` Ñ‡ĞµÑ€ĞµĞ· `min_exit_date_mp`.

### Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ V7

| ID | State | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----|-------|----------|
| 1 | inactive | ĞĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ (Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑ‚Ğ°Ñ†Ğ¸Ğ¸) |
| 2 | operations | Ğ’ ÑĞºÑĞ¿Ğ»ÑƒĞ°Ñ‚Ğ°Ñ†Ğ¸Ğ¸ |
| 3 | serviceable | Ğ˜ÑĞ¿Ñ€Ğ°Ğ²ĞµĞ½, Ğ½Ğ° ÑĞºĞ»Ğ°Ğ´Ğµ |
| 4 | repair | Ğ’ Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğµ |
| 5 | reserve | Ğ ĞµĞ·ĞµÑ€Ğ² / Ğ¿Ğ»Ğ°Ğ½Ğ¾Ğ²Ñ‹Ğ¹ spawn |
| 6 | storage | Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ (ÑĞ¿Ğ¸ÑĞ°Ğ½) |
| 7 | unserviceable | ĞĞµĞ¸ÑĞ¿Ñ€Ğ°Ğ²ĞµĞ½ (PPR >= OH, Ğ¶Ğ´Ñ‘Ñ‚ Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ°) |

### ĞšĞ²Ğ¾Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

**ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ñ‹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¾ÑƒÑ‚Ğ°:**
1. **P1:** serviceable â†’ operations (ÑĞ°Ğ¼Ñ‹Ğ¹ Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ğ¹)
2. **P2:** unserviceable â†’ operations (PPR=0)
3. **P3:** inactive â†’ operations (ÑĞ°Ğ¼Ñ‹Ğ¹ Ğ½Ğ¸Ğ·ĞºĞ¸Ğ¹)
4. **P4:** dynamic spawn (Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ° Ğ²ĞµÑ€Ñ‚Ğ¾Ğ»Ñ‘Ñ‚Ğ°)

**V7: ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ repair_time Ñ‡ĞµÑ€ĞµĞ· exit_date:**
- ĞŸÑ€Ğ¸ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğµ `ops â†’ unserviceable` ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ `exit_date = current_day + repair_time`
- P2 Ğ¿Ñ€Ğ¾Ğ¼Ğ¾ÑƒÑ‚ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ `current_day >= exit_date` Ğ¿ĞµÑ€ĞµĞ´ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ğ¾Ğ¼ Ğ² ops

**V8: ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· RepairLine:**
- unsvc Ğ´ĞµĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ `repair_days` Ğ´Ğ¾ 0
- P2/P3 Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑÑÑ‚ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾: `day >= repair_time`, `repair_days == 0`, Ğ»Ğ¸Ğ½Ğ¸Ñ Ñ `free_days >= repair_time`
- Ğ•ÑĞ»Ğ¸ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ½Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ñ‹ â†’ P4 (spawn)
- Ğ¡Ğ¼. `docs/adaptive_steps_logic.md` Ğ´Ğ»Ñ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹

**Ğ”ĞµĞ¼Ğ¾ÑƒÑ‚:** operations â†’ serviceable (Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ±Ñ‹Ñ‚ĞºĞµ)

### ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑˆĞ°Ğ³Ğ¸

**V7:**
```

---

## âœ… Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ĞºĞ²Ğ¾Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ V8 (messageâ€‘only, ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ)

### Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹
- Targetâ€‘ĞºĞ²Ğ¾Ñ‚Ñ‹ **Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼** (Miâ€‘8/Miâ€‘17 ÑÑ‡Ğ¸Ñ‚Ğ°ÑÑ‚ÑÑ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾).
- RepairLineâ€‘ĞºĞ²Ğ¾Ñ‚Ğ° **Ğ¾Ğ±Ñ‰Ğ°Ñ** Ğ´Ğ»Ñ Ğ¾Ğ±Ğ¾Ğ¸Ñ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ².
- QM Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ RepairLine Ğ¸Ğ· MacroProperty (`repair_line_free_days_mp`/`repair_line_acn_mp`) Ğ¿Ğ¾ÑĞ»Ğµ preâ€‘quota sync.
- ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ¼Ğ¾ÑƒÑ‚Ğ¾Ğ² Ğ¿Ğ¾ idx: **Ğ±Ğ¾Ğ»ÑŒÑˆĞµ idx â†’ Ğ¼Ğ¾Ğ»Ğ¾Ğ¶Ğµ â†’ Ğ²Ñ‹ÑˆĞµ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚**.
- Storage â€” Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹: **Ğ½Ğµ ÑƒÑ‡Ğ°ÑÑ‚Ğ²ÑƒĞµÑ‚** Ğ¸ Ğ½Ğµ ÑˆĞ»Ñ‘Ñ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹.
- Spawnâ€‘Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ²Ñ‹Ğ´Ğ°Ñ‘Ñ‚ **Ğ¾Ğ´Ğ¸Ğ½ SpawnMgr** (Ğ¿Ğ»Ğ¾Ñ‚Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½).
- Ğ Ğ°Ğ½Ğ½Ğ¸Ğ¹ Ğ²Ñ‹Ñ…Ğ¾Ğ´: **ĞµÑĞ»Ğ¸ 0 Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²/ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¸Ğ»Ğ¸ ĞºĞ²Ğ¾Ñ‚Ğ°=0**, Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ ÑÑ€Ğ°Ğ·Ñƒ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ°ĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ.
- Ğ’Ñ‹Ğ±Ğ¾Ñ€ RepairLine: **Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ free_days Ğ¿Ñ€Ğ¸ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¸ free_days â‰¥ repair_time** (Ğ°Ğ½Ñ‚Ğ¸â€‘Ñ„Ñ€Ğ°Ğ³Ğ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ).

### ĞšĞ°ÑĞºĞ°Ğ´ ĞºĞ²Ğ¾Ñ‚ (ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ, Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑĞ»Ğ¾Ñ‘Ğ²)
1) **Reset/Prepare** â€” ÑĞ±Ñ€Ğ¾Ñ Ñ„Ğ»Ğ°Ğ³Ğ¾Ğ² Ñƒ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ².  
2) **Announce (messages)** â€” Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ ÑˆĞ»ÑÑ‚ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ; RepairLine ÑˆĞ»Ñ‘Ñ‚ line_id/free_days.  
3) **Balance (QM)** â€” ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ `quota_left_mi8/mi17` Ğ¸ `repair_quota_left`.  
4) **Demote (Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼)** â€” Ğ´ĞµĞ¼Ğ¾ÑƒÑ‚ Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ±Ñ‹Ñ‚ĞºĞµ.  
5) **P1 (svcâ†’ops, Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼)** â€” ÑƒĞ¼ĞµĞ½ÑŒÑˆĞ°ĞµÑ‚ `quota_left_*`.  
6) **P2 (unsvcâ†’ops, Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ Ğ¿ÑƒĞ»)** â€” ĞµĞ´Ğ¸Ğ½Ğ°Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ Ğ¿Ğ¾ idx + Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ»Ğ¸Ğ½Ğ¸Ğ¹.  
7) **P3 (inactiveâ†’ops, Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ Ğ¿ÑƒĞ» Ğ¿Ğ¾ÑĞ»Ğµ P2)** â€” Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾ P2, ÑĞ»Ğ¾Ğ¹ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ P2.  
8) **Spawn (P4, Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼)** â€” Ğ¾ÑÑ‚Ğ°Ñ‚ĞºĞ¸ `quota_left_*`.
adaptive_days = min(min_limiter, days_to_program_change, days_to_exit_date)
```

**V8 (ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ¾):**
```
adaptive_days = min(min_dynamic, days_to_deterministic)
```

| V7 Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº | V8 Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº | Ğ§Ñ‚Ğ¾ Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ |
|-------------|-------------|--------------|
| `min_limiter` | `min_dynamic` | MIN(limiter) Ğ´Ğ»Ñ ops + repair |
| `days_to_program_change` | `deterministic_dates[]` | ĞĞ´Ğ¸Ğ½ MacroProperty ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ Ğ´Ğ°Ñ‚Ğ°Ğ¼Ğ¸ |
| `days_to_exit_date` (repair/spawn/**unsvc**) | `deterministic_dates[]` | **V8: unsvc ĞĞ• ÑƒÑ‡Ğ°ÑÑ‚Ğ²ÑƒĞµÑ‚** |

### Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° reset-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ (ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸)

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Ğ•ÑĞ»Ğ¸ Ğ½Ğ° ÑˆĞ°Ğ³Ğµ N Ğ½ĞµÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ² repair, Ñ‚Ğ¾ `atomicMin` Ğ½Ğµ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¸ Ğ² `min_exit_date_mp` Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ ÑÑ‚Ğ°Ñ€Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ñ ÑˆĞ°Ğ³Ğ° N-1.

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** Reset Ğ¿ĞµÑ€ĞµĞ´ ÑĞ±Ğ¾Ñ€Ğ¾Ğ¼ â†’ MAX Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ "Ğ½ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…".

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ¨ĞĞ“ N                                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Ğ¤ĞĞ—Ğ 0: Ğ”Ğ•Ğ¢Ğ•Ğ ĞœĞ˜ĞĞ˜Ğ ĞĞ’ĞĞĞĞ«Ğ• ĞŸĞ•Ğ Ğ•Ğ¥ĞĞ”Ğ«                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [0] repair_to_svc      â†’ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ exit_date <= current_day: 4â†’3     â”‚ â”‚
â”‚  â”‚ [1] spawn_to_ops       â†’ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ exit_date <= current_day: 5â†’2     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  Ğ¤ĞĞ—Ğ 0.5: Ğ¡Ğ‘Ğ ĞĞ¡ + Ğ¡Ğ‘ĞĞ  min_exit_date (ĞŸĞĞ¡Ğ›Ğ• Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ²!)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [2] reset_exit_date    â†’ min_exit_date_mp = 0xFFFFFFFF (MAX)       â”‚ â”‚
â”‚  â”‚ [3] copy_exit_repair   â†’ ĞĞ¡Ğ¢ĞĞ’Ğ¨Ğ˜Ğ•Ğ¡Ğ¯ repair: atomicMin(exit_date)  â”‚ â”‚
â”‚  â”‚ [4] copy_exit_spawn    â†’ ĞĞ¡Ğ¢ĞĞ’Ğ¨Ğ˜Ğ•Ğ¡Ğ¯ reserve: atomicMin(exit_date) â”‚ â”‚
â”‚  â”‚                                                                    â”‚ â”‚
â”‚  â”‚ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: min_exit_date_mp = MIN(exit_date Ğ¾ÑÑ‚Ğ°Ğ²ÑˆĞ¸Ñ…ÑÑ) Ğ¸Ğ»Ğ¸ MAX   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  Ğ¤ĞĞ—Ğ 4: Ğ¡Ğ‘ĞĞ  min_limiter                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [20] min_limiter       â†’ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ ops: atomicMin(limiter)           â”‚ â”‚
â”‚  â”‚                                                                    â”‚ â”‚
â”‚  â”‚ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: mp_min_limiter = MIN(Ğ²ÑĞµ limiter) Ğ¸Ğ»Ğ¸ MAX              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  Ğ¤ĞĞ—Ğ 5: Ğ’Ğ«Ğ§Ğ˜Ğ¡Ğ›Ğ•ĞĞ˜Ğ• adaptive_days                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [22] compute_global    â†’ Ğ§Ğ˜Ğ¢ĞĞ•Ğ¢: mp_min_limiter, min_exit_date_mp â”‚ â”‚
â”‚  â”‚                        â†’ ĞŸĞ˜Ğ¨Ğ•Ğ¢:  adaptive_days                    â”‚ â”‚
â”‚  â”‚                                                                    â”‚ â”‚
â”‚  â”‚ [23] reset_min_limiter â†’ mp_min_limiter = MAX (Ğ´Ğ»Ñ ÑˆĞ°Ğ³Ğ° N+1)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ±ĞµĞ· reset (Ğ‘ĞĞ“):**
```
Ğ¨Ğ°Ğ³ 10: ĞĞ³ĞµĞ½Ñ‚ A Ğ² repair, exit_date=150 â†’ min_exit_date_mp = 150
Ğ¨Ğ°Ğ³ 11: ĞĞ³ĞµĞ½Ñ‚ A Ğ²Ñ‹ÑˆĞµĞ» (4â†’3), Ğ½ĞµÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ² repair
        Ğ‘Ğ•Ğ— RESET: min_exit_date_mp = 150 (ÑÑ‚Ğ°Ñ€Ğ¾Ğµ!)
        â†’ adaptive_days Ğ½ĞµĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ = 150 - current_day
```

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ reset (ĞšĞĞ Ğ Ğ•ĞšĞ¢ĞĞ):**
```
Ğ¨Ğ°Ğ³ 10: ĞĞ³ĞµĞ½Ñ‚ A Ğ² repair, exit_date=150 â†’ min_exit_date_mp = 150
Ğ¨Ğ°Ğ³ 11: RESET â†’ min_exit_date_mp = MAX
        ĞĞµÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ² repair â†’ atomicMin Ğ½Ğµ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ
        min_exit_date_mp = MAX â†’ Ğ¸Ğ³Ğ½Ğ¾Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ² compute_global_min
```

**MAX = "Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ½Ğµ Ğ²Ğ»Ğ¸ÑĞµÑ‚ Ğ½Ğ° adaptive_days"**

---

## ğŸ“ Ğ¤Ğ°Ğ¹Ğ»Ñ‹ V7

| Ğ¤Ğ°Ğ¹Ğ» | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|------|----------|
| `orchestrator_limiter_v7.py` | Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ V7 |
| `rtc_state_transitions_v7.py` | RTC Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹ |
| `rtc_quota_v7.py` | RTC ĞºĞ²Ğ¾Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
| `rtc_spawn_dynamic_v7.py` | **Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ¿Ğ°Ğ²Ğ½ Mi-17** |
| `rtc_limiter_v5.py` | GPU-only Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑˆĞ°Ğ³Ğ¸ |
| `rtc_limiter_optimized.py` | Ğ‘Ğ¸Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº limiter |
| `base_model_messaging.py` | ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ°Ğ³ĞµĞ½Ñ‚Ğ° |

---

## ğŸ“ˆ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ V7

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|---------|----------|
| Ğ¨Ğ°Ğ³Ğ¸ | **192** |
| Ğ’Ñ€ĞµĞ¼Ñ GPU | **1.85Ñ** |
| Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ | **1976 Ğ´Ğ½ĞµĞ¹/ÑĞµĞº** |
| GPU | 100% |
| ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° | Single-phase |
| RTC Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ | **29** (27 + 2 dynamic spawn) |

**Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° (3650 Ğ´Ğ½ĞµĞ¹, Ğ´Ğ°Ñ‚Ğ°ÑĞµÑ‚ 2025-07-04):**
| State | ĞĞ³ĞµĞ½Ñ‚Ğ¾Ğ² | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ |
|-------|---------|------------|
| inactive | 94 | P3 Ğ¿Ñ€Ğ¾Ğ¼Ğ¾ÑƒÑ‚Ğ¸Ñ‚ Ğ¿Ğ¾ Ğ´ĞµÑ„Ğ¸Ñ†Ğ¸Ñ‚Ñƒ |
| operations | **173** | Target Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚ |
| serviceable | 0 | P1 Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½ |
| repair | 0 | Ğ’ÑĞµ Ğ²Ñ‹ÑˆĞ»Ğ¸ Ğ¸Ğ· Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ° |
| reserve | 0 | Spawn Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ |
| storage | 35 | Ğ”Ğ¾ÑÑ‚Ğ¸Ğ³Ğ»Ğ¸ LL/BR |
| unserviceable | 11 | ĞĞ¶Ğ¸Ğ´Ğ°ÑÑ‚ repair_time |
| **Ğ’Ğ¡Ğ•Ğ“Ğ** | **313** (279 + 34 dynamic spawn) |

**Program changes:**
- Ğ’ÑĞµĞ³Ğ¾ program_changes: **92** (Ğ·Ğ° 10 Ğ»ĞµÑ‚)
- ĞŸĞ¾Ğ¿Ğ°Ğ´Ğ°ÑÑ‚ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ² adaptive steps: **7** (Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ "Ğ¿ĞµÑ€ĞµĞ¿Ñ€Ñ‹Ğ³Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ" Ğ±Ğ¾Ğ»ĞµĞµ Ğ±Ğ»Ğ¸Ğ·ĞºĞ¸Ğ¼Ğ¸ limiter/exit_date ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸ÑĞ¼Ğ¸)
- Ğ­Ñ‚Ğ¾ **ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ** â€” V7 Ğ¿Ñ€Ñ‹Ğ³Ğ°ĞµÑ‚ Ğº Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞ¼Ñƒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ

**Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ¿Ğ°Ğ²Ğ½ Mi-17:**
- ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ ÑĞ»ĞµĞ´Ğ¸Ñ‚ Ğ·Ğ° Ğ´ĞµÑ„Ğ¸Ñ†Ğ¸Ñ‚Ğ¾Ğ¼ Mi-17 (target vs ops_count)
- ĞŸÑ€Ğ¸ Ğ´ĞµÑ„Ğ¸Ñ†Ğ¸Ñ‚Ğµ Ğ²Ñ‹Ğ´Ğ°Ñ‘Ñ‚ "Ñ‚Ğ¸ĞºĞµÑ‚Ñ‹" Ğ½Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
- Ğ¢Ğ¸ĞºĞµÑ‚Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· `agent_out` Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ğ² `operations`
- Ğ ĞµĞ·ĞµÑ€Ğ²: 50 Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ÑĞ»Ğ¾Ñ‚Ğ¾Ğ²

**Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ±Ğ°Ğ³Ğ¸ (14-01-2026):**
1. **Race condition Ğ² `rtc_compute_global_min`** â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ group_by=1 (Mi-8) Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ
2. **`num_program_changes` Ğ½Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞ»ÑÑ** â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ `setPropertyUInt` Ğ² except Ğ±Ğ»Ğ¾Ğº
3. **`v7_reset_buffers` Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹** â€” Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ 7 ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹ (Ğ½Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ operations)

---

## ğŸ”— Ğ¡Ğ²ÑĞ·Ğ°Ğ½Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

- `docs/rtc_pipeline_architecture.md` â€” Baseline Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (intent-based)
- `docs/validation.md` â€” Ğ˜Ğ½Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ¸ Ñ‚ĞµÑÑ‚Ñ‹
- `.cursor/rules/` â€” ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

---

## âœ… V8: RepairLine (ĞĞšĞ¢Ğ£ĞĞ›Ğ¬ĞĞĞ¯ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ)

> **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°  
> **Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ:** `docs/adaptive_steps_logic.md`  
> **Ğ¦ĞµĞ»ÑŒ:** ĞºĞ²Ğ¾Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· RepairLine + Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑˆĞ°Ğ³Ğ¸

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ V8 vs V7

| ĞÑĞ¿ĞµĞºÑ‚ | V7 | V8 |
|--------|-----|-----|
| unsvc Ğ² min_dynamic | âœ… Ğ”Ğ° (exit_date) | âŒ ĞĞµÑ‚ |
| unsvc Ğ´ĞµĞºÑ€ĞµĞ¼ĞµĞ½Ñ‚ | âœ… repair_days | âœ… repair_days |
| P2/P3 ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğµ | `current_day >= exit_date` | day >= repair_time, repair_days == 0, RepairLine.free_days â‰¥ repair_time |
| ĞšĞ²Ğ¾Ñ‚Ğ° Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ° | Ğ§ĞµÑ€ĞµĞ· exit_date ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ unsvc | repair_number Ğ¸Ğ· MP (Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ»Ğ¸Ğ½Ğ¸Ğ¹) |

### RepairLine (repair_number â†’ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ»Ğ¸Ğ½Ğ¸Ğ¹)

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ²Ğ¾Ñ‚Ğ¾Ğ¹ Ñ€ĞµĞ¼Ğ¾Ğ½Ñ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· Ğ»Ğ¸Ğ½Ğ¸Ğ¸ (free_days), Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ»Ğ¸Ğ½Ğ¸Ğ¹ = repair_number Ğ¸Ğ· MP

```
```
RepairLine (Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ»Ğ¸Ğ½Ğ¸Ğ¸):
  free_days += adaptive_days   // Ğ²ÑĞµĞ³Ğ´Ğ°
  Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ¿Ñ€Ğ¸ free_days >= repair_time
  Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¸: free_days = 0, aircraft_number = acn (Ğ¾Ğ´Ğ½Ğ¾ĞºÑ€Ğ°Ñ‚Ğ½Ğ¾)
  ÑĞ»Ğ¾Ñ‚Ñ‹: aircraft_number == 0 Ğ˜ free_days >= repair_time, Ğ±ĞµĞ· Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ° acn Ğ² ÑĞ¾ÑĞµĞ´Ğ½Ğ¸Ğµ Ğ´Ğ½Ğ¸
```

### ĞŸÑ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ» ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ (Ğ°Ğ´Ñ€ĞµÑĞ½Ñ‹Ğµ, Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ÑˆĞ°Ğ³Ğ°)

```
Ğ¡Ğ»Ğ¾Ğ¹ 2: QuotaManager Ñ€ĞµÑˆĞ°ĞµÑ‚
  - ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ Ğ´ĞµÑ„Ğ¸Ñ†Ğ¸Ñ‚, approved = MIN(Ğ´ĞµÑ„Ğ¸Ñ†Ğ¸Ñ‚, lines_available)
  - P2: unsvc Ğ¿Ğ¾ idx (Ğ¿ĞµÑ€Ğ²Ñ‹Ğµ approved), Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ free_days >= repair_time
  - P3: inactive Ğ¿Ğ¾ idx (ĞµÑĞ»Ğ¸ Ğ¾ÑÑ‚Ğ°Ğ»ÑÑ Ğ´ĞµÑ„Ğ¸Ñ†Ğ¸Ñ‚), Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ free_days >= repair_time
  - P4: spawn (ĞµÑĞ»Ğ¸ P2/P3 Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹)
  - Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ñ‘Ğ½Ğ½Ñ‹Ğ¼ Ğ»Ğ¸Ğ½Ğ¸ÑĞ¼: free_days = 0, aircraft_number = acn
```

### ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ (Ğ¸Ğ· V7)

V7 Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğµ MacroProperty Ğ±ÑƒÑ„ĞµÑ€Ñ‹ `promote[MAX_AGENTS]` Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ¸ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ QM â†’ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹. V8 Ğ·Ğ°Ğ¼ĞµĞ½ÑĞµÑ‚ Ğ¸Ñ… Ğ½Ğ° Ğ°Ğ´Ñ€ĞµÑĞ½Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ `MessageBucket`.

### Ğ¢Ğ¸Ğ¿Ñ‹ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ FLAME GPU

| Ğ¢Ğ¸Ğ¿ | Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ | ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² V8 |
|-----|-----------|------------|-------------------|
| **MessageNone** | O(1) | Ğ‘ĞµĞ· ĞºĞ¾Ğ¼Ğ¼ÑƒĞ½Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ | Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ |
| **MessageBruteForce** | O(NÂ²) | Ğ’ÑĞµ â†’ Ğ’ÑĞµ | âŒ Ğ—Ğ°Ğ¿Ñ€ĞµÑ‰Ñ‘Ğ½ |
| **MessageBucket** | O(N/K) | ĞŸĞ¾ ĞºĞ»ÑÑ‡Ñƒ | âœ… ĞšĞ²Ğ¾Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
| **MessageArray** | O(1) | ĞŸĞ¾ Ğ¸Ğ½Ğ´ĞµĞºÑÑƒ | Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ»Ñ spawn |
| **MessageSpatial** | O(K) | ĞŸĞ¾ Ñ€Ğ°Ğ´Ğ¸ÑƒÑÑƒ | ĞĞµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ğ¼Ğ¾ |

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° V8

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ĞšĞ’ĞĞ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• V8 (MessageBucket)                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Ğ¡Ğ»Ğ¾Ğ¹ 1: Ğ¡Ğ‘ĞĞ  (MacroProperty â€” Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ count_agents  â†’ atomicAdd ÑÑ‡Ñ‘Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ¿Ğ¾ state/group                  â”‚ â”‚
â”‚  â”‚ collect_idx   â†’ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ idx Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸ Ğ´Ğ»Ñ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ threshold     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  Ğ¡Ğ»Ğ¾Ğ¹ 2: Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ¯ QM â†’ MessageBucket                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ QM_mi8  â†’ MessageBucket[key=1] = {quotas, thresholds}              â”‚ â”‚
â”‚  â”‚ QM_mi17 â†’ MessageBucket[key=2] = {quotas, thresholds}              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  Ğ¡Ğ»Ğ¾Ğ¹ 3: ĞŸĞ Ğ˜ĞœĞ•ĞĞ•ĞĞ˜Ğ• (Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ Ñ‡Ğ¸Ñ‚Ğ°ÑÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ĞĞ³ĞµĞ½Ñ‚Ñ‹ Ñ‡Ğ¸Ñ‚Ğ°ÑÑ‚ MessageBucket[ÑĞ²Ğ¾Ğ¹ group_by]                         â”‚ â”‚
â”‚  â”‚ Ğ‘ĞµÑ€ÑƒÑ‚ threshold Ğ¿Ğ¾ ÑĞ²Ğ¾ĞµĞ¼Ñƒ state                                    â”‚ â”‚
â”‚  â”‚ if (my_idx >= threshold) â†’ promote                                 â”‚ â”‚
â”‚  â”‚ if (my_idx < demote_threshold) â†’ demote                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  Ğ¡Ğ»Ğ¾Ğ¹ 4: Ğ”Ğ˜ĞĞĞœĞ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™ SPAWN (Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ SpawnMgr â†’ MessageBucket[key=100+group] = {need, base_idx}         â”‚ â”‚
â”‚  â”‚ SpawnTickets Ñ‡Ğ¸Ñ‚Ğ°ÑÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ, ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ V8

#### 1. ĞšĞ²Ğ¾Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (promote/demote)

```cpp
// ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ
MessageBucket quota_msg;
quota_msg.setBounds(1, 2);  // ĞºĞ»ÑÑ‡Ğ¸ 1=Mi-8, 2=Mi-17
quota_msg.newVariable<int>("quota_s3");      // serviceable
quota_msg.newVariable<int>("quota_s7");      // unserviceable
quota_msg.newVariable<int>("quota_s5");      // inactive
quota_msg.newVariable<uint>("threshold_s3"); // min idx Ğ´Ğ»Ñ promote Ğ¸Ğ· s3
quota_msg.newVariable<uint>("threshold_s7"); // min idx Ğ´Ğ»Ñ promote Ğ¸Ğ· s7
quota_msg.newVariable<uint>("threshold_s5"); // min idx Ğ´Ğ»Ñ promote Ğ¸Ğ· s5
quota_msg.newVariable<uint>("demote_threshold"); // max idx Ğ´Ğ»Ñ demote

// QM Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚
FLAMEGPU->message_out.setKey(my_group_by);  // 1 Ğ¸Ğ»Ğ¸ 2
FLAMEGPU->message_out.setVariable<int>("quota_s3", quota_serviceable);
// ...

// ĞĞ³ĞµĞ½Ñ‚ Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚
for (auto &msg : FLAMEGPU->message_in(my_group_by)) {
    uint threshold = msg.getVariable<uint>("threshold_s3");
    if (my_state == 3 && my_idx >= threshold) {
        // Promote: serviceable â†’ operations
    }
}
```

#### 2. Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ spawn (Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ)

```cpp
// ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ
MessageBucket spawn_msg;
spawn_msg.setBounds(101, 102);  // ĞºĞ»ÑÑ‡Ğ¸ 101=Mi-8 spawn, 102=Mi-17 spawn
spawn_msg.newVariable<int>("need");       // ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ
spawn_msg.newVariable<uint>("base_idx");  // Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ idx Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

// SpawnMgr Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚
FLAMEGPU->message_out.setKey(100 + my_group_by);
FLAMEGPU->message_out.setVariable<int>("need", deficit);
// ...

// SpawnTicket Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚
for (auto &msg : FLAMEGPU->message_in(100 + my_group_by)) {
    int need = msg.getVariable<int>("need");
    // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
}
```

### ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° V8

| ĞÑĞ¿ĞµĞºÑ‚ | V7 (MacroProperty) | V8 (MessageBucket) |
|--------|-------------------|-------------------|
| Ğ‘ÑƒÑ„ĞµÑ€Ñ‹ promote[idx] | MAX_AGENTS Ã— 4 Ğ±Ğ°Ğ¹Ñ‚ | ĞĞµ Ğ½ÑƒĞ¶Ğ½Ñ‹ |
| ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ | Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½ÑƒÑ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ | Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸ |
| ĞœĞ¾Ğ´ĞµĞ»ÑŒ | Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ°ÑÑĞ¸Ğ²Ñ‹ | ĞĞ³ĞµĞ½Ñ‚Ğ½Ğ¾Ğµ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ |
| ĞĞ´Ñ€ĞµÑĞ°Ñ†Ğ¸Ñ | ĞŸĞ¾ idx Ğ² Ğ±ÑƒÑ„ĞµÑ€Ğµ | ĞŸĞ¾ group_by Ğ² ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¸ |

### Ğ Ğ¸ÑĞºĞ¸ V8

1. **ĞĞ´Ğ¸Ğ½ QM = Ğ¾Ğ´Ğ½Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ** â€” QM Ğ½Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ·Ğ° Ğ²Ñ‹Ğ·Ğ¾Ğ²
2. **Threshold Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ** â€” QM Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ·Ğ½Ğ°Ñ‚ÑŒ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ idx Ğ¿Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸ÑĞ¼
3. **Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ** â€” Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ ĞºĞ°Ğº Ñ MacroProperty Ğ² V7

### Ğ¤Ğ°Ğ¹Ğ»Ñ‹ V8

| Ğ¤Ğ°Ğ¹Ğ» | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|------|--------|----------|
| `orchestrator_limiter_v8.py` | âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ | ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ V8 |
| `rtc_limiter_v8.py` | âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ | Adaptive steps Ñ deterministic_dates |
| `rtc_state_transitions_v8.py` | âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ | Next-day dt Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (SNE + dt >= LL) |
| `rtc_repair_lines_v8.py` | âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ | RepairLine (free_days + aircraft_number) |
| `rtc_quota_v8.py` | âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½ | P2/P3 Ñ‡ĞµÑ€ĞµĞ· RepairLine |

### Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ V8 (16-01-2026)

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | V8 | V7 | Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ |
|---------|-----|-----|-----------|
| Ğ¨Ğ°Ğ³Ğ¸ | **186** | 192 | -3% |
| GPU Ğ²Ñ€ĞµĞ¼Ñ | **1.80Ñ** | 1.85Ñ | -3% |
| Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ GPU | **2027 Ğ´/Ñ** | 1976 Ğ´/Ñ | +3% |
| ĞĞ³ĞµĞ½Ñ‚Ğ¾Ğ² | 294 | 313 | -6% |
| ĞĞ±Ñ‰ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ | 5.60Ñ | ~6Ñ | â€” |

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ:**
- V8 Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ RepairLine Ğ²Ğ¼ĞµÑÑ‚Ğ¾ MacroProperty exit_date Ğ´Ğ»Ñ unsvc
- ĞœĞµĞ½ÑŒÑˆĞµ ÑˆĞ°Ğ³Ğ¾Ğ² Ğ¸Ğ·-Ğ·Ğ° Ğ±Ğ¾Ğ»ĞµĞµ Ğ°Ğ³Ñ€ĞµÑÑĞ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ adaptive step (deterministic_dates)
- 9 Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² spawn (Mi-17)

---

*Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½: 16-01-2026*  
*Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ V8: âœ… ĞĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° (RepairLine)*
*Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ V7: ğŸ“¦ Ğ ĞµĞ·ĞµÑ€Ğ²Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°*


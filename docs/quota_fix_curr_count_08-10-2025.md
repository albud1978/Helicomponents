# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å—á—ë—Ç–∞ curr –≤ –∫–≤–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

**–î–∞—Ç–∞:** 08-10-2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–º–æ—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `mi17_approve` (–±—É—Ñ–µ—Ä –¥–µ–º–æ—É—Ç–∞) –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Å—á—ë—Ç–∞ curr

---

## ‚úÖ –í–Ω–µ—Å—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω –º–æ–¥—É–ª—å `rtc_quota_count_ops.py`
- –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≥–µ–Ω—Ç–æ–≤ –≤ operations
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ `mi8_ops_count` / `mi17_ops_count`
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–î–û** –∫–≤–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–º–æ—É—Ç–æ–≤

**–ë—ã–ª–æ:**
```cpp
used = –ø–æ–¥—Å—á—ë—Ç –∏–∑ mi17_approve (–±—É—Ñ–µ—Ä –¥–µ–º–æ—É—Ç–∞)
deficit = target - used
```

**–°—Ç–∞–ª–æ:**
```cpp
curr = –ø–æ–¥—Å—á—ë—Ç –∏–∑ mi17_ops_count (—Ä–µ–∞–ª—å–Ω–æ–µ –≤ operations)
used = –ø–æ–¥—Å—á—ë—Ç –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –ø—Ä–æ–º–æ—É—Ç–æ–≤ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
deficit = target - (curr + used)
```

### 3. –†–∞–∑–¥–µ–ª–µ–Ω—ã –±—É—Ñ–µ—Ä—ã
- `mi17_ops_count` - –ø–æ–¥—Å—á—ë—Ç –≤ operations (–¥–ª—è curr)
- `mi17_approve` - –¥–µ–º–æ—É—Ç (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–º–æ—É—Ç–µ)
- `mi17_approve_s3/s5/s1` - –ø—Ä–æ–º–æ—É—Ç (—Ä–∞–∑–¥–µ–ª—å–Ω–æ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º)

---

## üìã –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **count_ops** - –ø–æ–¥—Å—á—ë—Ç curr (–∞–≥–µ–Ω—Ç–æ–≤ –≤ operations)
2. **state_2_operations** - –ª–æ–≥–∏–∫–∞ operations (–Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ sne, –ø—Ä–æ–≤–µ—Ä–∫–∏)
3. **quota_ops_excess** - –î–ï–ú–û–£–¢ (–µ—Å–ª–∏ balance > 0)
4. **quota_promote_serviceable** - –ü–†–û–ú–û–£–¢ P1 (–µ—Å–ª–∏ balance < 0)
5. **quota_promote_reserve** - –ü–†–û–ú–û–£–¢ P2 (–µ—Å–ª–∏ balance < 0)
6. **quota_promote_inactive** - –ü–†–û–ú–û–£–¢ P3 (–µ—Å–ª–∏ balance < 0)
7. **states_stub** - –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
8. **state_manager_operations** - –ø–µ—Ä–µ—Ö–æ–¥—ã (–≤–∫–ª—é—á–∞—è 2‚Üí2)

---

## üß™ –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–∞

```bash
cd "/home/budnik_an/cube linux/cube" && \
rm -rf code/sim_v2/__pycache__ code/sim_v2/rtc_modules/__pycache__ && \
python3 code/sim_v2/orchestrator_v2.py \
  --modules count_ops spawn_v2 state_2_operations quota_ops_excess quota_promote_serviceable quota_promote_reserve quota_promote_inactive states_stub state_manager_operations state_manager_repair state_manager_storage \
  --steps 250 \
  --enable-mp2 \
  --drop-table \
  2>&1 | tee /tmp/quota_fixed_250.log | tail -100
```

---

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

- **Serviceable** –¥–æ–ª–∂–µ–Ω **—Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è** (–Ω–µ —Ä–∞—Å—Ç–∏ –¥–æ 117-124)
- **Operations** –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚âà target (85 –¥–ª—è Mi-17)
- **–õ–æ–≥–∏** –ø–æ–∫–∞–∂—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Curr –∏ Deficit

---

**–ê–≤—Ç–æ—Ä:** AI Assistant + –ê–ª–µ–∫—Å–µ–π  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é


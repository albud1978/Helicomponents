# RTC Components Architecture (–ê–≥—Ä–µ–≥–∞—Ç—ã)

**–î–∞—Ç–∞:** 31.10.2025  
**–í–µ—Ä—Å–∏—è:** 0.2 (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è sne_new/ppr_new –∏–∑ MP1)

## 0. –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

- –ü–æ—Å—Ç–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ ETL, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å–µ–π—á–∞—Å –≤—ã–ø–æ–ª–Ω—è–µ–º (`status_overhaul`, `program_ac`, `inactive_planery_processor`, Program_AC / Program_FL –∑–∞–≥—Ä—É–∑—á–∏–∫–∏), –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –ø–ª–∞–Ω–µ—Ä—ã** (`group_by ‚àà {1,2}`).  
  - –≠—Ç–∏ —à–∞–≥–∏ –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã —Å–∏–º—É–ª—è—Ü–∏—è –ø–ª–∞–Ω–µ—Ä–æ–≤ –∏–º–µ–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ `status_id`, `aircraft_number`, `flight_program` –∏ –∫–≤–æ—Ç—ã.  
  - –ù–∞ –∞–≥—Ä–µ–≥–∞—Ç—ã (`group_by ‚â• 3`) –æ–Ω–∏ –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—é—Ç—Å—è: —Å—Ç–∞—Ç—É—Å –æ—Å—Ç–∞—ë—Ç—Å—è `0`, `aircraft_number` ‚Äî 0, –ø—Ä–æ–≥—Ä–∞–º–º –Ω–∞–ª—ë—Ç–∞ –Ω–µ—Ç.
- –î–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –∫–æ—Ä–Ω–µ–≤—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –æ—Å—Ç–∞—ë—Ç—Å—è –ø–ª–∞–Ω–µ—Ä–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è: MP2 –≤—ã–¥–∞—ë—Ç –Ω–∞–ª—ë—Ç, —Ä–µ–º–æ–Ω—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ `assembly_trigger`, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫–∏–µ –∞–≥—Ä–µ–≥–∞—Ç—ã –Ω—É–∂–Ω—ã/–≤—ã–±—ã–≤–∞—é—Ç. –ü–æ—ç—Ç–æ–º—É –æ—Ç–¥–µ–ª—å–Ω—ã–µ MP –ø–æ–¥ –∞–≥—Ä–µ–≥–∞—Ç—ã (–∞–Ω–∞–ª–æ–≥ MP4/MP5 —É –ø–ª–∞–Ω–µ—Ä–æ–≤) –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è ‚Äî –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MP2 –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ ¬´–∫–æ–º–∞–Ω–¥¬ª –Ω–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—é.
- –¶–µ–ª—å –±–ª–∏–∂–∞–π—à–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π ‚Äî **–ø–æ—ç—Ç–∞–ø–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å `status_id` –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤** —Ç–∞–∫, —á—Ç–æ–±—ã –≤ –º–∞—Å—Å–∏–≤–µ –Ω–µ –æ—Å—Ç–∞–≤–∞–ª–æ—Å—å –Ω—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π. –õ–æ–≥–∏–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –±—É–¥–µ—Ç –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –¥–∞–Ω–Ω—ã–µ MP2 (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–ª–∞–Ω–µ—Ä–∞, —Ç—Ä–∏–≥–≥–µ—Ä—ã –∑–∞–º–µ–Ω—ã) –∏ —Å—Ç–∞–Ω–µ—Ç —á–∞—Å—Ç—å—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –æ–ø–∏—Å–∞–Ω–Ω–æ–π –Ω–∏–∂–µ.
- –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî –¥–∏–∑–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç RTC –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –µ—â—ë –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∞; —Ç–µ–∫—Å—Ç –Ω–∏–∂–µ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º, –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –¥–∞–Ω–Ω—ã—Ö –∏ –ø–ª–∞–Ω—É spawn/—Å—Ç–∞—Ç—É—Å–æ–≤.

---

## 1. –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ê–ì–ï–ù–¢–û–í

### –ê–≥—Ä–µ–≥–∞—Ç—ã (Agent "unit")

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ | Œî –æ—Ç –ø–ª–∞–Ω–µ—Ä–æ–≤ |
|-----------|------------|---------------|
| **States** | operations, serviceable, repair, reserve, storage | -inactive |
| **ID** | idx, **psn**, aircraft_number, partseqno_i, group_by | +psn (PRIMARY KEY) |
| **–ù–∞—Ä–∞–±–æ—Ç–∫–∞** | sne, ppr | -cso |
| **–ù–æ—Ä–º–∞—Ç–∏–≤—ã** | ll, oh, br | = |
| **–†–µ–º–æ–Ω—Ç** | repair_time, repair_days | -assembly_time, -partout_time |
| **–¢—Ä–∏–≥–≥–µ—Ä—ã** | ‚Äî | -assembly_trigger, -active_trigger, -partout_trigger, -s4_days |
| **MP2 –ø–ª–∞–Ω–µ—Ä–∞** | dt, dn | —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ mp2_dt/mp2_dn –ø–æ aircraft_number |
| **–ö–≤–æ—Ç—ã** | intent_state, mfg_date | = |
| **Transitions** | transition_2_to_3, transition_2_to_4, transition_2_to_6, transition_3_to_2, transition_4_to_5, transition_5_to_2 | -transition_1_to_2, -transition_1_to_4, -transition_4_to_2 |
| **–°–ª—É–∂–µ–±–Ω–æ–µ** | bi_counter | = |

**–ò—Ç–æ–≥–æ:** 23 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (vs 33 —É –ø–ª–∞–Ω–µ—Ä–æ–≤)

**–í–∞–∂–Ω–æ:** 
- State `inactive` —É –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–Ω–æ–≤—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `reserve`)
- Transition `1‚Üí2` –ù–ï –Ω—É–∂–µ–Ω (–Ω–µ—Ç inactive state)
- Spawn –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –∏–¥—ë—Ç —Å—Ä–∞–∑—É –≤ `reserve` (–≥–æ—Ç–æ–≤ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–∞ –ø–ª–∞–Ω–µ—Ä)

---

## 2. –ò–°–¢–û–ß–ù–ò–ö–ò –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò

### –¢–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ò—Å—Ç–æ—á–Ω–∏–∫ (MP3) | –õ–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ) | –õ–æ–≥–∏–∫–∞ spawn (–Ω–æ–≤—ã–µ inactive) |
|------------|----------------|-------------------------------------|-------------------------------|
| **idx** | –ü–ª–æ—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å | –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å (last_idx_–ø–ª–∞–Ω–µ—Ä–æ–≤ + 1), —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ mfg_date –≤–Ω—É—Ç—Ä–∏ group_by | –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π idx –≤ –∫–æ–Ω—Ü–µ –≥—Ä—É–ø–ø—ã |
| **psn** | MP3.psn | PRIMARY KEY –∞–≥—Ä–µ–≥–∞—Ç–∞, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | –°–µ–≥–º–µ–Ω—Ç: 2000000 + (group_by √ó 100000) + counter |
| **aircraft_number** | MP3.aircraft_number | –ù–æ–º–µ—Ä –ø–ª–∞–Ω–µ—Ä–∞-—Ä–æ–¥–∏—Ç–µ–ª—è (0 –µ—Å–ª–∏ –≤ –ø—É–ª–µ) | 0 (–≤ –ø—É–ª–µ –¥–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏) |
| **partseqno_i** | MP3.partseqno_i | –ö–æ–¥ —Ç–∏–ø–∞ –∞–≥—Ä–µ–≥–∞—Ç–∞ –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ | –í—ã–±–æ—Ä –ø–æ –ª–æ–≥–∏–∫–µ (—Å–º. —Ä–∞–∑–¥–µ–ª 5.5) |
| **group_by** | MP3.group_by | –¢–∏–ø –∞–≥—Ä–µ–≥–∞—Ç–∞ (3=–î–≤–≥ –ú–∏-8, 4=–î–≤–≥ –ú–∏-17) | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞: 3 –∏–ª–∏ 4 |
| **sne** | MP3.sne | –ù–∞—Ä–∞–±–æ—Ç–∫–∞ —Å –Ω–∞—á–∞–ª–∞ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ (–º–∏–Ω—É—Ç—ã) | MP1.sne_new[partseqno_i] (NULL‚Üí0) |
| **ppr** | MP3.ppr | –ù–∞—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–∞–ø—Ä–µ–º–æ–Ω—Ç–∞ | MP1.ppr_new[partseqno_i] (NULL‚Üí0) |
| **ll** | MP3.ll –∏–ª–∏ MP1 | –ï—Å–ª–∏ MP3.ll > 0 ‚Üí MP3, –∏–Ω–∞—á–µ MP1 –ø–æ group_by | MP1 –ø–æ group_by |
| **oh** | MP1 | –ü–æ partseqno_i —á–µ—Ä–µ–∑ mp1_index | MP1 –ø–æ group_by |
| **br** | MP1 | –ü–æ partseqno_i —á–µ—Ä–µ–∑ mp1_index | MP1 –ø–æ group_by |
| **repair_time** | MP1 | mp1_repair_time[pidx] | MP1 –ø–æ group_by |
| **repair_days** | MP3.repair_days | –°—á–µ—Ç—á–∏–∫ –¥–Ω–µ–π –≤ —Ä–µ–º–æ–Ω—Ç–µ | 0 (–Ω–æ–≤—ã–π –∞–≥—Ä–µ–≥–∞—Ç) |
| **intent_state** | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | 0 (–±–µ–∑ –Ω–∞–º–µ—Ä–µ–Ω–∏–π) | 0 (–±–µ–∑ –Ω–∞–º–µ—Ä–µ–Ω–∏–π) |
| **mfg_date** | MP3.mfg_date | –î–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ (–¥–Ω–∏ —Å —ç–ø–æ—Ö–∏) | 0 (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–∞ –ø–ª–∞–Ω–µ—Ä) |
| **dt, dn** | MP2 | –ß—Ç–µ–Ω–∏–µ –ø–æ aircraft_number –∏–∑ mp2_dt/mp2_dn –ø–ª–∞–Ω–µ—Ä–∞ | 0 (aircraft_number=0) |
| **bi_counter** | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ | 1 (–¥–ª—è BI) | 1 (–¥–ª—è BI) |
| **transition_*** | –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã | 0 (–±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤) | 0 (–±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤) |
| **state** | MP3.status_id | –ú–∞–ø–ø–∏–Ω–≥ status_id ‚Üí state | reserve (–≥–æ—Ç–æ–≤ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ) |

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –∏–∑ ~7113 —Å—Ç—Ä–æ–∫ MP3 –±–µ—Ä—É—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ —Å `group_by ‚àà {3,4}` (—Å–Ω–∞—á–∞–ª–∞ 3, –ø–æ—Ç–æ–º 4; –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã –¥–æ–±–∞–≤—è—Ç—Å—è –ø–æ–∑–∂–µ)
- **–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å: –æ–¥–∏–Ω –∞–≥–µ–Ω—Ç = –æ–¥–∏–Ω `psn` (PRIMARY KEY), –Ω–µ aircraft_number**
  - ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –£ –ø–ª–∞–Ω–µ—Ä–æ–≤ (group_by=1,2) –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `psn` –ù–ï–¢! –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `aircraft_number`
  - –£ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ (group_by‚â•3) `psn` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ (PRIMARY KEY –≤ –°–£–ë–î)
- –°–≤—è–∑—å —Å –ø–ª–∞–Ω–µ—Ä–æ–º: —á–µ—Ä–µ–∑ `aircraft_number` (0 = –≤ –ø—É–ª–µ, >0 = –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø–ª–∞–Ω–µ—Ä–µ)
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è: –ø–ª–æ—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ idx –ø–ª–∞–Ω–µ—Ä–æ–≤, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ: —Å–Ω–∞—á–∞–ª–∞ –≤—Å–µ group_by=3, –∑–∞—Ç–µ–º –≤—Å–µ group_by=4
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ mfg_date (–æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º) –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π group_by
- **Spawn-—Ä–µ–∑–µ—Ä–≤:** —Å–ª–æ—Ç—ã –≤ –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã —Ä–µ–∑–µ—Ä–≤–∏—Ä—É—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  - –†–µ–∑–µ—Ä–≤–Ω—ã–µ —Å–ª–æ—Ç—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ –≤—ã—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–∞ (—Ä–∞–∑–¥–µ–ª 5.4)
  - –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ `idx` –∏ `psn`** (–ø–æ —Ñ–æ—Ä–º—É–ª–µ —Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
  - –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ **–ù–ï –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è** –¥–æ –º–æ–º–µ–Ω—Ç–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ spawn
  - –†–µ–∞–ª—å–Ω—ã–π spawn –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–µ—Ñ–∏—Ü–∏—Ç–µ –≤ –ø—É–ª–µ (—Ä–∞–∑–¥–µ–ª 5.3)

---

---

## 3. –ê–ù–ê–õ–ò–ó –î–ò–ê–ü–ê–ó–û–ù–û–í PSN

### –¢–µ–∫—É—â–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –≤ heli_pandas (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 30.10.2025)

| group_by | –¢–∏–ø | –í—Å–µ–≥–æ | –£–Ω–∏–∫.PSN | MIN(psn) | MAX(psn) |
|----------|-----|-------|----------|----------|----------|
| 1 | –ü–ª–∞–Ω–µ—Ä—ã –ú–∏-8 | 163 | 163 | 148724 | 922207 |
| 2 | –ü–ª–∞–Ω–µ—Ä—ã –ú–∏-17 | 116 | 116 | 148717 | 1459322 |
| **3** | **–î–≤–≥ –ú–∏-8** | **520** | **520** | **2702** | **1606586** |
| **4** | **–î–≤–≥ –ú–∏-17** | **384** | **384** | **2760** | **1519814** |
| 5 | –ê–≥—Ä–µ–≥–∞—Ç | 264 | 264 | 2715 | 1543914 |
| 6 | –ê–≥—Ä–µ–≥–∞—Ç | 1588 | 1588 | 6557 | 1612576 |
| 7 | –ê–≥—Ä–µ–≥–∞—Ç | 248 | 248 | 2934 | 1521154 |
| 8 | –ê–≥—Ä–µ–≥–∞—Ç | 287 | 287 | 2778 | 1521178 |
| 9 | –ê–≥—Ä–µ–≥–∞—Ç | 275 | 275 | 2716 | 1521182 |
| 10 | –ê–≥—Ä–µ–≥–∞—Ç | 249 | 249 | 2777 | 1521186 |
| 11 | –ê–≥—Ä–µ–≥–∞—Ç | 324 | 324 | 2746 | 1608677 |
| 12 | –ê–≥—Ä–µ–≥–∞—Ç | 269 | 269 | 2718 | 1606588 |
| 13 | –ê–≥—Ä–µ–≥–∞—Ç | 155 | 155 | 2880 | 1612142 |
| 14 | –ê–≥—Ä–µ–≥–∞—Ç | 212 | 212 | 2750 | 1468367 |
| 15 | –ê–≥—Ä–µ–≥–∞—Ç | 23 | 23 | 21721 | 1519916 |
| 16 | –ê–≥—Ä–µ–≥–∞—Ç | 15 | 15 | 1058970 | 1150787 |
| 17 | –ê–≥—Ä–µ–≥–∞—Ç | 308 | 308 | 2729 | 1612124 |
| 18 | –ê–≥—Ä–µ–≥–∞—Ç | 167 | 167 | 15581 | 1612588 |
| 19 | –ê–≥—Ä–µ–≥–∞—Ç | 183 | 183 | 3528 | 1612583 |
| 20 | –ê–≥—Ä–µ–≥–∞—Ç | 175 | 175 | 24492 | 1612600 |
| 21 | –ê–≥—Ä–µ–≥–∞—Ç | 222 | 222 | 7168 | 1612936 |
| 22 | –ê–≥—Ä–µ–≥–∞—Ç | 412 | 412 | 6071 | 1606156 |
| 23 | –ê–≥—Ä–µ–≥–∞—Ç | 139 | 139 | 3839 | 1606162 |
| 24 | –ê–≥—Ä–µ–≥–∞—Ç | 415 | 415 | 4554 | 1520674 |

**–í–∞–∂–Ω–æ:** –ì—Ä—É–ø–ø–∞ 0 –±–æ–ª—å—à–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã 5-24 (–ø–æ–∞–≥—Ä–µ–≥–∞—Ç–Ω–æ).

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** PSN –ù–ï –ø–ª–æ—Ç–Ω—ã–µ (–ø—Ä–æ–ø—É—Å–∫–æ–≤ ~1.6–ú), –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

**–ò—Ç–æ–≥–æ:** 24 –≥—Ä—É–ø–ø—ã (1-2: –ø–ª–∞–Ω–µ—Ä—ã, 3-24: –∞–≥—Ä–µ–≥–∞—Ç—ã), –≤—Å–µ–≥–æ 7113 –∑–∞–ø–∏—Å–µ–π.

**–ì–ª–æ–±–∞–ª—å–Ω—ã–π MAX(psn) = 1612936** (group_by=21)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (100k –Ω–∞ –≥—Ä—É–ø–ø—É):**

| group_by | –¢–∏–ø | –î–∏–∞–ø–∞–∑–æ–Ω PSN | Capacity |
|----------|-----|--------------|----------|
| 1 | –ü–ª–∞–Ω–µ—Ä—ã –ú–∏-8 | [2100000, 2200000) | 100000 |
| 2 | –ü–ª–∞–Ω–µ—Ä—ã –ú–∏-17 | [2200000, 2300000) | 100000 |
| **3** | **–î–≤–≥ –ú–∏-8** | **[2300000, 2400000)** | **100000** |
| **4** | **–î–≤–≥ –ú–∏-17** | **[2400000, 2500000)** | **100000** |
| 5 | –ê–≥—Ä–µ–≥–∞—Ç | [2500000, 2600000) | 100000 |
| 6 | –ê–≥—Ä–µ–≥–∞—Ç | [2600000, 2700000) | 100000 |
| 7 | –ê–≥—Ä–µ–≥–∞—Ç | [2700000, 2800000) | 100000 |
| 8 | –ê–≥—Ä–µ–≥–∞—Ç | [2800000, 2900000) | 100000 |
| 9 | –ê–≥—Ä–µ–≥–∞—Ç | [2900000, 3000000) | 100000 |
| 10 | –ê–≥—Ä–µ–≥–∞—Ç | [3000000, 3100000) | 100000 |
| 11 | –ê–≥—Ä–µ–≥–∞—Ç | [3100000, 3200000) | 100000 |
| 12 | –ê–≥—Ä–µ–≥–∞—Ç | [3200000, 3300000) | 100000 |
| 13 | –ê–≥—Ä–µ–≥–∞—Ç | [3300000, 3400000) | 100000 |
| 14 | –ê–≥—Ä–µ–≥–∞—Ç | [3400000, 3500000) | 100000 |
| 15 | –ê–≥—Ä–µ–≥–∞—Ç | [3500000, 3600000) | 100000 |
| 16 | –ê–≥—Ä–µ–≥–∞—Ç | [3600000, 3700000) | 100000 |
| 17 | –ê–≥—Ä–µ–≥–∞—Ç | [3700000, 3800000) | 100000 |
| 18 | –ê–≥—Ä–µ–≥–∞—Ç | [3800000, 3900000) | 100000 |
| 19 | –ê–≥—Ä–µ–≥–∞—Ç | [3900000, 4000000) | 100000 |
| 20 | –ê–≥—Ä–µ–≥–∞—Ç | [4000000, 4100000) | 100000 |
| 21 | –ê–≥—Ä–µ–≥–∞—Ç | [4100000, 4200000) | 100000 |
| 22 | –ê–≥—Ä–µ–≥–∞—Ç | [4200000, 4300000) | 100000 |
| 23 | –ê–≥—Ä–µ–≥–∞—Ç | [4300000, 4400000) | 100000 |
| 24 | –ê–≥—Ä–µ–≥–∞—Ç | [4400000, 4500000) | 100000 |

**–§–æ—Ä–º—É–ª–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
```
base_psn_group = 2000000 + (group_by √ó 100000)
psn = base_psn_group + spawn_counter_group
```
–≥–¥–µ `spawn_counter_group` ‚Äî —Å—á–µ—Ç—á–∏–∫ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ **–≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã** (0, 1, 2, ..., 99999)

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ü–µ—Ä–≤—ã–π –Ω–æ–≤—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å –ú–∏-8 (group_by=3): `psn = 2300000 + 0 = 2300000`
- –ü–µ—Ä–≤—ã–π –Ω–æ–≤—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å –ú–∏-17 (group_by=4): `psn = 2400000 + 0 = 2400000`
- –ü–µ—Ä–≤—ã–π –Ω–æ–≤—ã–π –∞–≥—Ä–µ–≥–∞—Ç –≥—Ä—É–ø–ø—ã 24: `psn = 4400000 + 0 = 4400000`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ 24 –≥—Ä—É–ø–ø (–ª–µ–≥–∫–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –ø–æ PSN)
- ‚úÖ –ó–∞–ø–∞—Å 100k –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –Ω–∞ –∫–∞–∂–¥—É—é –≥—Ä—É–ø–ø—É
- ‚úÖ –£–¥–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: `group_by = (psn - 2000000) / 100000`
- ‚úÖ –†–µ–∑–µ—Ä–≤ –¥–ª—è –ø–ª–∞–Ω–µ—Ä–æ–≤ (group_by=1,2) –Ω–∞ –±—É–¥—É—â–µ–µ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã 24 –≥—Ä—É–ø–ø (–±–µ–∑ group_by=0)

---

## 4. –ó–ê–î–ê–ß–ò –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### 4.1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–≤–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ (TODO)



**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
1. –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–≤–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ (–∞–Ω–∞–ª–æ–≥ –ª–æ–≥–∏–∫–∏ –ø–ª–∞–Ω–µ—Ä–æ–≤)
3. –£—á–µ—Å—Ç—å —Å–≤—è–∑—å —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –ø–ª–∞–Ω–µ—Ä–∞ (operations, repair, assembly_trigger)
4. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏: –∞–≥—Ä–µ–≥–∞—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ `operations` –µ—Å–ª–∏ –µ–≥–æ –ø–ª–∞–Ω–µ—Ä –Ω–µ –≤ `operations`

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 30.10.2025

---

## 5. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê SPAWN –ê–ì–†–ï–ì–ê–¢–û–í

### 5.1. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è (–∞–Ω–∞–ª–æ–≥ –ø–ª–∞–Ω–µ—Ä–æ–≤)

**–≠—Ç–∞–ø 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (setup_env)**

1. **–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ—Ç–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å–µ:**
   - –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∞–≥—Ä–µ–≥–∞—Ç—ã –∏–∑ MP3 (–Ω–∞–ø—Ä–∏–º–µ—Ä, group_by=3): idx=[0..N-1]
   - –ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è spawn: idx=[N..N+RESERVE-1]
   - –ü—Ä–∏–º–µ—Ä: 520 –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π –ú–∏-8 + 100 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ = 620 total
   - ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –†–µ–∑–µ—Ä–≤–Ω—ã–µ —Å–ª–æ—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è **–ø—É—Å—Ç—ã–º–∏** (—Ç–æ–ª—å–∫–æ `idx` –∏ `psn`)

2. **–ü—Ä–µ–¥—Ä–∞—Å—á—ë—Ç PSN –¥–ª—è —Ä–µ–∑–µ—Ä–≤–∞:**
   - –§–æ—Ä–º—É–ª–∞: base_psn_group = 2000000 + (group_by √ó 100000)
   - –î–ª—è group_by=3: base_psn –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 2300000
   - –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –∞–≥—Ä–µ–≥–∞—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π PSN: 2300000, 2300001, 2300002...
   - –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤:
     ```python
     for i in range(reserve_slots):
         reserve_idx = existing_count + i
         reserve_psn = base_psn_group + i
         # –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ù–ï –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è (–æ—Å—Ç–∞—é—Ç—Å—è –ø—É—Å—Ç—ã–º–∏/–Ω—É–ª–µ–≤—ã–º–∏)
         # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–º spawn —á–µ—Ä–µ–∑ RTC
     ```

3. **–†–∞–∑–º–µ—Ä—ã MacroProperty:**
   - **MAX_FRAMES** = –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≥–µ–Ω—Ç–æ–≤ (–ø–ª–∞–Ω–µ—Ä—ã + –∞–≥—Ä–µ–≥–∞—Ç—ã + —Ä–µ–∑–µ—Ä–≤ –¥–ª—è spawn)
     - –î–ª—è –ø–ª–∞–Ω–µ—Ä–æ–≤: 279 (163 Mi-8 + 116 Mi-17)
     - –î–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤: –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ + —Ä–µ–∑–µ—Ä–≤)
   - **MAX_DAYS** = 4000 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≥–æ—Ä–∏–∑–æ–Ω—Ç —Å–∏–º—É–ª—è—Ü–∏–∏)
   - **MAX_SIZE** = MAX_FRAMES √ó (MAX_DAYS + 1) ‚Äî —Ä–∞–∑–º–µ—Ä –ª–∏–Ω–µ–π–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ MP5

**–≠—Ç–∞–ø 2: RTC Spawn**

1. **–ê–≥–µ–Ω—Ç—ã-—É—Ç–∏–ª–∏—Ç—ã:**
   - `spawn_mgr_unit_{group_by}` ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä (1 —ç–∫–∑–µ–º–ø–ª—è—Ä), —Ö—Ä–∞–Ω–∏—Ç `next_idx`, `next_psn`
   - `spawn_ticket_unit_{group_by}` ‚Äî —Ç–∏–∫–µ—Ç—ã (N —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤), –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ

2. **RTC —Ñ—É–Ω–∫—Ü–∏—è spawn:**
   - –ß–∏—Ç–∞–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä (–¥–µ—Ñ–∏—Ü–∏—Ç –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –≤ –ø—É–ª–µ –∏–ª–∏ –∑–∞–º–µ–Ω–∞ –Ω–∞ –ø–ª–∞–Ω–µ—Ä–µ)
   - –ë–µ—Ä—ë—Ç `idx` –∏ `psn` –∏–∑ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (–ø—Ä–µ–¥—Ä–∞—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)
   - –°–æ–∑–¥–∞—ë—Ç –∞–≥–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ `agent_out` —Å–æ –≤—Å–µ–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (—Ä–∞–∑–¥–µ–ª 2)
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `partseqno_i` –ø–æ –ª–æ–≥–∏–∫–µ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ (—Å–º. –≠—Ç–∞–ø 5)
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ—Ä–º–∞—Ç–∏–≤—ã (ll, oh, br) –∏–∑ Environment constants –¥–ª—è –¥–∞–Ω–Ω–æ–π group_by

3. **–í—ã—Ö–æ–¥ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
   - Spawn –≤ –ø—É–ª ‚Üí state `reserve` (–≥–æ—Ç–æ–≤ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ)
   - Spawn –Ω–∞ –∑–∞–º–µ–Ω—É ‚Üí state `operations` (—Å—Ä–∞–∑—É –Ω–∞ –ø–ª–∞–Ω–µ—Ä–µ)
   - State `inactive` –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–≠—Ç–∞–ø 3: –¢—Ä–∏–≥–≥–µ—Ä spawn**

- **–î–ª—è –ø–ª–∞–Ω–µ—Ä–æ–≤:** –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω (`mp4_new_counter_mi17_seed[day] > 0`)
- **–î–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤:** **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á—ë—Ç –¥–µ—Ñ–∏—Ü–∏—Ç–∞** –≤ –ø—É–ª–µ

**–§–æ—Ä–º—É–ª–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞ spawn –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ (–¥–ª—è –∫–∞–∂–¥–æ–π group_by):**

```python
# –ü–æ–¥—Å—á—ë—Ç –∞–≥–µ–Ω—Ç–æ–≤ –≤ –ø—É–ª–µ (–≥–æ—Ç–æ–≤—ã—Ö –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ)
pool_count = count_agents(group_by, states=[reserve, serviceable])

# –ù–æ—Ä–º–∞ –ø—É–ª–∞ = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–ª–∞–Ω–µ—Ä–æ–≤ √ó comp_number (–∏–∑ MP1)
# comp_number = –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–∏–º—ë–Ω–Ω—ã—Ö –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –Ω–∞ 1 –≤–µ—Ä—Ç–æ–ª—ë—Ç
pool_norm = count_planers(group_by_planer) √ó comp_number

# –¢—Ä–∏–≥–≥–µ—Ä spawn
if pool_count < pool_norm:
    spawn_need = pool_norm - pool_count
    spawn_agents(group_by, spawn_need)
```

**–ü—Ä–∏–º–µ—Ä –¥–ª—è –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π –ú–∏-8 (group_by=3):**
- `comp_number` = 2 (–¥–≤–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è –Ω–∞ –æ–¥–∏–Ω –ú–∏-8)
- –ü–ª–∞–Ω–µ—Ä–æ–≤ –ú–∏-8 –≤ operations: 120
- `pool_norm` = 120 √ó 2 = 240 –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π
- `pool_count` (reserve + serviceable): 220 –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π
- `spawn_need` = 240 - 220 = **20 –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π**

**–í–∞–∂–Ω–æ:** –¢—Ä–∏–≥–≥–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–∫–∞–∂–¥—ã–π –¥–µ–Ω—å** –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Å–∏–º—É–ª—è—Ü–∏–∏.

**–≠—Ç–∞–ø 4: –†–∞—Å—á—ë—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤**

–§–æ—Ä–º—É–ª–∞ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ **–ø—Ä–æ–≥–Ω–æ–∑ –≤—ã—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–∞** (–∏–∑ –∞—Ä—Ö–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞ vNV):

```python
# –î–ª—è –∫–∞–∂–¥–æ–π group_by –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ (3, 4, 5, ..., 24):

# 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–≤—è–∑—å —Å –ø–ª–∞–Ω–µ—Ä–∞–º–∏ —á–µ—Ä–µ–∑ ac_type_mask
# ac_type_mask –∞–≥—Ä–µ–≥–∞—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω–∞ –∫–∞–∫–∏—Ö –ø–ª–∞–Ω–µ—Ä–∞—Ö –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
# - 32 (0x20) ‚Üí –ú–∏-8 (group_by=1)
# - 64 (0x40) ‚Üí –ú–∏-17 (group_by=2)
# - 96 (0x60) ‚Üí –æ–±–∞ —Ç–∏–ø–∞ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π)
planer_group_by = determine_planer_group(aggregate_group_by, ac_type_mask)

# 2. –°—É–º–º–∞—Ä–Ω—ã–π –Ω–∞–ª—ë—Ç –ø–ª–∞–Ω–µ—Ä–æ–≤ –∑–∞ 10 –ª–µ—Ç (–∏–∑ MP2 –ø—Ä–æ–≥–Ω–æ–∑–∞)
total_flight_hours_10y = sum([
    mp2_dt[day, idx] 
    for day in range(0, 3650)
    for idx in planers 
    if planers[idx].group_by == planer_group_by
])

# 3. LL –∞–≥—Ä–µ–≥–∞—Ç–∞ –∏–∑ MP1 (–∂–∏–∑–Ω–µ–Ω–Ω—ã–π –ª–∏–º–∏—Ç –≤ –º–∏–Ω—É—Ç–∞—Ö)
ll_aggregate = mp1_ll[aggregate_group_by]

# 4. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã—Ä–∞–±–æ—Ç–∞—é—Ç —Ä–µ—Å—É—Ä—Å
aggregates_consumed = total_flight_hours_10y / ll_aggregate

# 5. –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø–∞—Å –ø—Ä–æ—á–Ω–æ—Å—Ç–∏ 20%
aggregates_needed = aggregates_consumed √ó 1.2

# 6. –ü–æ–¥—Å—á—ë—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –∏–∑ MP3
existing_count = len([row for row in MP3 if row.group_by == aggregate_group_by])

# 7. –†–∞—Å—á—ë—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
reserve_slots = max(100, aggregates_needed - existing_count)

# 8. –ò—Ç–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ frames –¥–ª—è –≥—Ä—É–ø–ø—ã
frames_total_group = existing_count + reserve_slots

# 9. –û–±—â–∏–π MAX_FRAMES –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
MAX_FRAMES = sum([frames_total_group for group_by in [1, 2, 3, 4, ..., 24]])
```

**–ü—Ä–∏–º–µ—Ä –¥–ª—è –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π –ú–∏-17 (group_by=4):**
- –ü–ª–∞–Ω–µ—Ä–æ–≤ –ú–∏-17: 116
- –°—É–º–º–∞—Ä–Ω—ã–π –Ω–∞–ª—ë—Ç –∑–∞ 10 –ª–µ—Ç: 116 √ó 3650 –¥–Ω–µ–π √ó 90 –º–∏–Ω/–¥–µ–Ω—å = **38,232,000 –º–∏–Ω—É—Ç**
- LL –¥–≤–∏–≥–∞—Ç–µ–ª—è: 270,000 –º–∏–Ω—É—Ç (4500 —á–∞—Å–æ–≤)
- –ê–≥—Ä–µ–≥–∞—Ç–æ–≤ –≤—ã—Ä–∞–±–æ—Ç–∞—é—Ç —Ä–µ—Å—É—Ä—Å: 38,232,000 / 270,000 = **141.6**
- –° –∑–∞–ø–∞—Å–æ–º 20%: 141.6 √ó 1.2 = **170 –¥–≤–∏–≥–∞—Ç–µ–ª–µ–π**
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö: 384
- –†–µ–∑–µ—Ä–≤: max(100, 170 - 384) = **100** (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–∑–µ—Ä–≤)
- –ò—Ç–æ–≥–æ: 384 + 100 = **484 —Å–ª–æ—Ç–∞**

**–≠—Ç–∞–ø 5: –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ partseqno_i –¥–ª—è –Ω–æ–≤–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–∞**

–ü—Ä–∏ –∑–∞–º–µ–Ω–µ –∞–≥—Ä–µ–≥–∞—Ç–∞:
1. **–ß–∏—Ç–∞–µ–º `partseqno_i` —Å–Ω—è—Ç–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–∞**
2. **–ü—Ä–æ–≤–µ—Ä—è–µ–º MP1 –ø–æ —ç—Ç–æ–º—É `partseqno_i`:**
   - –ï—Å–ª–∏ `sne_new` –∏ `ppr_new` **–ù–ï –ø—É—Å—Ç—ã–µ** ‚Üí
     - `partseqno_i` = `partseqno_i` —Å–Ω—è—Ç–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–∞ (—Ç–æ—Ç –∂–µ —Ç–∏–ø)
     - `sne` = `sne_new` –∏–∑ MP1
     - `ppr` = `ppr_new` –∏–∑ MP1
   - –ï—Å–ª–∏ `sne_new` –∏ `ppr_new` **–ø—É—Å—Ç—ã–µ** ‚Üí
     - `partseqno_i` = `partseqno_i` **–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–∞** —Å —Ç–æ–π –∂–µ `group_by` (–ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É `idx`)
     - `sne` = 0
     - `ppr` = 0

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ `sne_new` –∏ `ppr_new` –≤ MP1 –¥–ª—è `partseqno_i` —Å–Ω—è—Ç–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–∞
- –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Üí —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –∞–≥—Ä–µ–≥–∞—Ç —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞ —Å –Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Ä–∞–±–æ—Ç–∫–æ–π –∏–∑ MP1
- –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç (—Ç–∏–ø –Ω–µ –≤—ã–ø—É—Å–∫–∞–µ—Ç—Å—è) ‚Üí –∏—â–µ–º —Ñ–∏–ª—å—Ç—Ä–æ–º –∞–≥–µ–Ω—Ç–∞ —Å —Ç–æ–π –∂–µ `group_by` –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º `idx`, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ `partseqno_i` –¥–ª—è –Ω–æ–≤–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–∞ —Å –Ω—É–ª–µ–≤–æ–π –Ω–∞—Ä–∞–±–æ—Ç–∫–æ–π

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:** –ù–µ —Ö—Ä–∞–Ω–∏–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—á—ë—Ç—á–∏–∫–∏ —Ç–∏–ø–æ–≤ ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –∞–≥–µ–Ω—Ç–∞–º –±—ã—Å—Ç—Ä—ã–π (–∞–≥–µ–Ω—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ –Ω–µ–º–Ω–æ–≥–æ).

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–º–µ–Ω–µ, —Ç.–µ. –Ω–æ–≤—ã–π –∞–≥—Ä–µ–≥–∞—Ç –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Å—Ä–∞–∑—É –≤ `operations` (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –ø–ª–∞–Ω–µ—Ä), –∞ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ `reserve`.

**–î–∞—Ç–∞:** 31.10.2025

---

## 6. –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–ò SNE_NEW/PPR_NEW (31.10.2025)

### 6.1. –ü—Ä–æ–±–ª–µ–º–∞
–î–ª—è spawn –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Ä–∞–±–æ—Ç–∫–∞ (`sne`, `ppr`) –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ `md_components` (–ø–æ–ª—è `sne_new`, `ppr_new`). –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **—á–∞—Å–∞—Ö** –≤ Excel-–∏—Å—Ç–æ—á–Ω–∏–∫–µ, –Ω–æ —Å–∏–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ **–º–∏–Ω—É—Ç–∞—Ö**.

### 6.2. –†–µ—à–µ–Ω–∏–µ

**–≠—Ç–∞–ø 1: ETL (Extract)**
- **–§–∞–π–ª:** `code/md_components_loader.py`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `sne_new` –∏ `ppr_new` –∏–∑ —á–∞—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—ã (√ó 60)
  2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `NULL` –∑–Ω–∞—á–µ–Ω–∏–π (–ø—Ä–∏–∑–Ω–∞–∫ "–∞–≥—Ä–µ–≥–∞—Ç –Ω–µ –≤—ã–ø—É—Å–∫–∞–µ—Ç—Å—è")
  3. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ `Nullable(UInt32)` –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –≤ ClickHouse

**–≠—Ç–∞–ø 2: –°–∏–º—É–ª—è—Ü–∏—è (Transform)**
- **–§–∞–π–ª:** `code/sim_env_setup.py`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  1. –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `fetch_mp1_sne_ppr_new()` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ `sne_new`/`ppr_new` –∏–∑ `md_components`
  2. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `NULL` ‚Üí `SENTINEL` (0xFFFFFFFF) –¥–ª—è FLAME GPU Environment
  3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤ `mp1_sne_new` –∏ `mp1_ppr_new` –≤ Environment

- **–§–∞–π–ª:** `code/sim_v2/base_model.py`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  1. –û–±—ä—è–≤–ª–µ–Ω–∏–µ Environment Property Arrays: `mp1_sne_new`, `mp1_ppr_new`
  2. –°–æ–∑–¥–∞–Ω–∏–µ Environment constants: `mi17_sne_new_const`, `mi17_ppr_new_const`
  3. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è `SENTINEL` ‚Üí `0` –¥–ª—è RTC –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

- **–§–∞–π–ª:** `code/sim_v2/rtc_modules/rtc_spawn_v2.py`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  1. –ó–∞–º–µ–Ω–∞ —Ö–∞—Ä–¥–∫–æ–¥–∞ `0u` –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏–∑ Environment constants
  2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏ spawn

### 6.3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

**–û–±—Ä–∞–±–æ—Ç–∫–∞ NULL –∑–Ω–∞—á–µ–Ω–∏–π:**
- **–í –°–£–ë–î:** `Nullable(UInt32)` ‚Äî NULL –æ–∑–Ω–∞—á–∞–µ—Ç "–∞–≥—Ä–µ–≥–∞—Ç –Ω–µ –≤—ã–ø—É—Å–∫–∞–µ—Ç—Å—è"
- **–í FLAME GPU:** Sentinel value `0xFFFFFFFF` (Environment –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Nullable)
- **–í RTC –∫–æ–¥–µ:** Sentinel ‚Üí `0` (–Ω–æ–≤—ã–π –∞–≥—Ä–µ–≥–∞—Ç –±–µ–∑ –Ω–∞—Ä–∞–±–æ—Ç–∫–∏)

**–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –µ–¥–∏–Ω–∏—Ü:**
- **Excel –∏—Å—Ç–æ—á–Ω–∏–∫:** —á–∞—Å—ã (4500-7500)
- **–°–£–ë–î:** –º–∏–Ω—É—Ç—ã (270000-450000)
- **–°–∏–º—É–ª—è—Ü–∏—è:** –º–∏–Ω—É—Ç—ã (–≤—Å–µ —Ä–∞—Å—á–µ—Ç—ã –≤ –º–∏–Ω—É—Ç–∞—Ö)

### 6.4. –í–∞–ª–∏–¥–∞—Ü–∏—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –°–£–ë–î:**
```sql
SELECT partno, sne_new, ppr_new
FROM md_components
WHERE sne_new IS NOT NULL AND sne_new > 0
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢–í2-117–ê: 270000 –º–∏–Ω—É—Ç (4500 —á–∞—Å–æ–≤) ‚úÖ
- –¢–í3-117–í–ú: 270000 –º–∏–Ω—É—Ç (4500 —á–∞—Å–æ–≤) ‚úÖ
- –ê–ò-9–í: 360000 –º–∏–Ω—É—Ç (6000 —á–∞—Å–æ–≤) ‚úÖ
- –í–†-8–ê: 450000 –º–∏–Ω—É—Ç (7500 —á–∞—Å–æ–≤) ‚úÖ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏:**
- –ü–æ–ª–Ω—ã–π –ø—Ä–æ–≥–æ–Ω 3650 –¥–Ω–µ–π: ‚úÖ –£—Å–ø–µ—à–Ω–æ
- Spawn –ø–ª–∞–Ω–µ—Ä–æ–≤ (Mi-17): `sne=0, ppr=0` ‚úÖ (–¥–ª—è –ø–ª–∞–Ω–µ—Ä–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- –í—ã–≥—Ä—É–∑–∫–∞ MP2: 1039632 —Å—Ç—Ä–æ–∫ –∑–∞ 21.71—Å ‚úÖ

### 6.5. –ò—Ç–æ–≥–∏

‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞:**
1. ETL –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —á–∞—Å—ã‚Üí–º–∏–Ω—É—Ç—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º NULL
2. –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ MP1 arrays
3. RTC spawn –≥–æ—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sne_new`/`ppr_new` –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤
4. –î–ª—è –ø–ª–∞–Ω–µ—Ä–æ–≤ (Mi-17) spawn –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `0` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 31.10.2025

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è sne_new/ppr_new —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ (31.10.2025).

---

## 7. –û–°–û–ë–´–ï –°–õ–£–ß–ê–ò –†–ï–ú–û–ù–¢–ê/–ü–†–û–î–õ–ï–ù–ò–Ø

### 7.1. –õ–æ–ø–∞—Å—Ç–∏ (group_by=6): –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –±–µ–∑ –æ–±–Ω—É–ª–µ–Ω–∏—è ppr

**–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:** 02.01.2026

**–ü—Ä–æ–±–ª–µ–º–∞:**
–õ–æ–ø–∞—Å—Ç–∏ (group_by=6, –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã `8–ê–¢-2710-00`, `8–ê–¢.2710.000`) –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –∫–∞–ø–∏—Ç–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º –ø–æ–Ω–∏–º–∞–Ω–∏–∏. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞** ‚Äî –∞–≥—Ä–µ–≥–∞—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é –±–µ–∑ –æ–±–Ω—É–ª–µ–Ω–∏—è –Ω–∞—Ä–∞–±–æ—Ç–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è (validate_heli_pandas.py):**
   - –î–ª—è group_by=6 **–ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è** —É—Å–ª–æ–≤–∏–µ `ppr > oh`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ `sne > ll` –æ—Å—Ç–∞—ë—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π
   - –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ: ppr –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ–±–Ω—É–ª–µ–Ω–∏—è, –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ oh ‚Äî —à—Ç–∞—Ç–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

2. **–°–∏–º—É–ª—è—Ü–∏—è (RTC spawn/repair):**
   - –ü—Ä–∏ "—Ä–µ–º–æ–Ω—Ç–µ" (–ø—Ä–æ–¥–ª–µ–Ω–∏–∏) –ª–æ–ø–∞—Å—Ç–µ–π **–ù–ï –æ–±–Ω—É–ª—è–µ–º ppr**
   - –ê–≥—Ä–µ–≥–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é —Å —Ç–µ–º –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ–º ppr
   - –ö–æ–Ω—Ç—Ä–æ–ª—å –ø–æ `sne > ll` –æ—Å—Ç–∞—ë—Ç—Å—è –∫—Ä–∏—Ç–∏—á–Ω—ã–º

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –≤ RTC:**
```cuda
// –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∞–≥—Ä–µ–≥–∞—Ç–∞ –∏–∑ —Ä–µ–º–æ–Ω—Ç–∞:
if (group_by == 6) {
    // –õ–æ–ø–∞—Å—Ç–∏: ppr –ù–ï –æ–±–Ω—É–ª—è–µ—Ç—Å—è (–ø—Ä–æ–¥–ª–µ–Ω–∏–µ, –Ω–µ —Ä–µ–º–æ–Ω—Ç)
    // ppr —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
} else {
    // –û—Å—Ç–∞–ª—å–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã: –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ä–µ–º–æ–Ω—Ç
    ppr = 0;  // –û–±–Ω—É–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–ø—Ä–µ–º–æ–Ω—Ç–∞
}
```

**–†–µ—Å—É—Ä—Å—ã –ª–æ–ø–∞—Å—Ç–µ–π –≤ md_components:**
| partno | ll_mi8 | ll_mi17 | oh_mi8 | oh_mi17 |
|--------|--------|---------|--------|---------|
| 8–ê–¢-2710-00 | 150,000 | 150,000 | 120,000 | 120,000 |
| 8–ê–¢.2710.000 | 150,000 | 150,000 | 120,000 | 120,000 |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** oh –¥–ª—è –ª–æ–ø–∞—Å—Ç–µ–π —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–∑–Ω–∞—á–∞–µ—Ç "–∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–æ –æ—á–µ—Ä–µ–¥–Ω–æ–≥–æ –ø—Ä–æ–¥–ª–µ–Ω–∏—è", –∞ –Ω–µ "–º–µ–∂—Ä–µ–º–æ–Ω—Ç–Ω—ã–π —Ä–µ—Å—É—Ä—Å" –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º –ø–æ–Ω–∏–º–∞–Ω–∏–∏.

### 7.2. –ü–ª–∞–Ω–µ—Ä—ã Mi-17: –ø–æ—Ä–æ–≥ –º–µ–∂—Ä–µ–º–æ–Ω—Ç–Ω–æ–≥–æ –¥–ª—è –ø–æ–¥—ä—ë–º–∞ –∏–∑ inactive (br2_mi17)

**–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:** 04.01.2026

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ –ø–æ–¥—ä—ë–º–µ Mi-17 –∏–∑ inactive (–∫–∞–Ω–Ω–∏–±–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤–µ—Ä—Ç–æ–ª—ë—Ç–æ–≤) —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ:
- **–†–µ–º–æ–Ω—Ç** (–æ–±–Ω—É–ª–µ–Ω–∏–µ ppr) ‚Äî –¥–æ—Ä–æ–≥–æ, –Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –º–µ–∂—Ä–µ–º–æ–Ω—Ç–Ω—ã–π —Ä–µ—Å—É—Ä—Å
- **–ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è –±–µ–∑ —Ä–µ–º–æ–Ω—Ç–∞** (ppr —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è) ‚Äî –¥–µ—à–µ–≤–ª–µ, –Ω–æ –ø–æ–∑–∂–µ –ø—Ä–∏–¥—ë—Ç—Å—è –≥–Ω–∞—Ç—å –Ω–∞ –±–∞–∑—É –ø–æ–≤—Ç–æ—Ä–Ω–æ

**–≠–∫–æ–Ω–æ–º–∏–∫–∞:**
- –ü–µ—Ä–µ–≥–æ–Ω –Ω–∞ –±–∞–∑—É –¥–ª—è –∫–∞–ø—Ä–µ–º–æ–Ω—Ç–∞ ‚âà 20 –ª—ë—Ç–Ω—ã—Ö —á–∞—Å–æ–≤
- –≠—Ç–æ 20-25% —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–∞–ø—Ä–µ–º–æ–Ω—Ç–∞ –≤ –ø–æ—Ç–µ—Ä—è–Ω–Ω–æ–π –≤—ã—Ä—É—á–∫–µ
- –ü–æ—Ä–æ–≥ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è: 3500 —á–∞—Å–æ–≤ –∏–∑ 4500 —á–∞—Å–æ–≤ (oh)

**–†–µ—à–µ–Ω–∏–µ:**

1. **–ù–æ–≤–æ–µ –ø–æ–ª–µ `br2_mi17` –≤ md_components:**
   - –î–ª—è group_by=2 (Mi-17): br2_mi17 = 210,000 –º–∏–Ω—É—Ç (3500 —á–∞—Å–æ–≤)
   - –î–ª—è group_by=1 (Mi-8): –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–≤—Å–µ–≥–¥–∞ —Ä–µ–º–æ–Ω—Ç)

2. **–õ–æ–≥–∏–∫–∞ –≤ RTC (`rtc_apply_1_to_2`):**

| ppr | –î–µ–π—Å—Ç–≤–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|-----|----------|-------------|
| **< br2_mi17** (< 3500—á) | –ü–æ–¥—ä—ë–º **–ë–ï–ó —Ä–µ–º–æ–Ω—Ç–∞** (ppr —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è) | –û—Å—Ç–∞—Ç–æ–∫ > 1000—á ‚Äî –¥–µ—à–µ–≤–ª–µ –ª–µ—Ç–∞—Ç—å –±–µ–∑ —Ä–µ–º–æ–Ω—Ç–∞ |
| **‚â• br2_mi17** (‚â• 3500—á) | –ü–æ–¥—ä—ë–º **–° —Ä–µ–º–æ–Ω—Ç–æ–º** (ppr = 0) | –û—Å—Ç–∞—Ç–æ–∫ < 1000—á ‚Äî –¥–µ—à–µ–≤–ª–µ —Å—Ä–∞–∑—É —Å–¥–µ–ª–∞—Ç—å –∫–∞–ø—Ä–µ–º–æ–Ω—Ç |

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –≤ RTC:**
```cuda
// –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ inactive ‚Üí operations:
const unsigned int br2_mi17 = FLAMEGPU->environment.getProperty<unsigned int>("mi17_br2_const");

if (group_by == 1u) {
    // Mi-8: –≤—Å–µ–≥–¥–∞ —Ä–µ–º–æ–Ω—Ç ‚Üí PPR = 0
    FLAMEGPU->setVariable<unsigned int>("ppr", 0u);
} else if (group_by == 2u && ppr >= br2_mi17) {
    // Mi-17 —Å ppr >= –ø–æ—Ä–æ–≥–∞ (3500—á): —Ä–µ–º–æ–Ω—Ç ‚Üí PPR = 0
    FLAMEGPU->setVariable<unsigned int>("ppr", 0u);
}
// Mi-17 —Å ppr < –ø–æ—Ä–æ–≥–∞: PPR —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (–∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è –±–µ–∑ —Ä–µ–º–æ–Ω—Ç–∞)
```

**–ê–Ω–∞–ª–æ–≥–∏—è —Å br (breakeven repair –¥–ª—è sne/ll):**
- `br` ‚Äî –ø–æ—Ä–æ–≥ –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ (sne/ll): –µ—Å–ª–∏ sne > br, –¥–µ—à–µ–≤–ª–µ —Å–ø–∏—Å–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ç
- `br2` ‚Äî –ø–æ—Ä–æ–≥ –¥–ª—è –º–µ–∂—Ä–µ–º–æ–Ω—Ç–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ (ppr/oh): –µ—Å–ª–∏ ppr ‚â• br2, –¥–µ—à–µ–≤–ª–µ —Å–¥–µ–ª–∞—Ç—å —Ä–µ–º–æ–Ω—Ç

3. **–ü—Ä–æ–ø—É—Å–∫ –æ–∂–∏–¥–∞–Ω–∏—è repair_time (`rtc_quota_promote_inactive`):**

   Mi-17 —Å –Ω–∏–∑–∫–∏–º ppr –Ω–µ —Ç–æ–ª—å–∫–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç ppr, –Ω–æ –∏ **–ø—Ä–æ–ø—É—Å–∫–∞—é—Ç –æ–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–º–æ–Ω—Ç–∞**:
   
   | ppr | –û–∂–∏–¥–∞–Ω–∏–µ repair_time | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
   |-----|---------------------|-------------|
   | **< br2_mi17** | **–ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç** | –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è ‚Äî –±–æ—Ä—Ç —Å—Ä–∞–∑—É –≥–æ—Ç–æ–≤ |
   | **‚â• br2_mi17** | **–ñ–¥—ë—Ç** | –†–µ–º–æ–Ω—Ç ‚Äî –±–æ—Ä—Ç –∂–¥—ë—Ç repair_time –¥–Ω–µ–π |
   
   **–≠—Ñ—Ñ–µ–∫—Ç:** —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é –Ω–∞ ~43 –¥–Ω—è –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Ç—É–µ–º—ã—Ö –±–æ—Ä—Ç–æ–≤.

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
| AC | ppr (–º–∏–Ω) | ppr (—á) | –û–∂–∏–¥–∞–Ω–∏–µ | –†–µ—à–µ–Ω–∏–µ |
|----|-----------|---------|----------|---------|
| 25434 | 207,067 | 3,451 | –ü—Ä–æ–ø—É—Å–∫ | –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è ‚úÖ |
| 27071 | 37,377 | 623 | –ü—Ä–æ–ø—É—Å–∫ | –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è ‚úÖ |
| 22378 | 435 | 7 | –ü—Ä–æ–ø—É—Å–∫ | –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è ‚úÖ |
| –û—Å—Ç–∞–ª—å–Ω—ã–µ | ‚â• 210,000 | ‚â• 3,500 | repair_time | –†–µ–º–æ–Ω—Ç ‚úÖ |

---

## 8. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ó–ê–ú–ï–ù–´ –ê–ì–†–ï–ì–ê–¢–û–í (FIFO-–û–ß–ï–†–ï–î–¨)

**–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:** 05.01.2026

### 8.1. –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –∞–≥—Ä–µ–≥–∞—Ç–∞ –∏–∑ —Å—Ç—Ä–æ—è (ppr ‚â• oh –∏–ª–∏ sne ‚â• ll) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. –ù–∞–π—Ç–∏ –∑–∞–º–µ–Ω—É –Ω–∞ —Å–∫–ª–∞–¥–µ –∏—Å–ø—Ä–∞–≤–Ω—ã—Ö
2. –ü–µ—Ä–µ–¥–∞—Ç—å —Å–∏–≥–Ω–∞–ª –æ—Ç –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–∞ –∫ –∑–∞–º–µ–Ω–µ
3. –ò–∑–º–µ–Ω–∏—Ç—å `aircraft_number` (location) —É –æ–±–æ–∏—Ö –∞–≥—Ä–µ–≥–∞—Ç–æ–≤
4. –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω—ã (1:1)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** Host-—Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞—Ä—É—à–∞—é—Ç GPU-—Å–∏–º—É–ª—è—Ü–∏—é, –ø–æ—ç—Ç–æ–º—É –≤—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ GPU —á–µ—Ä–µ–∑ RTC.

### 8.2. –†–µ—à–µ–Ω–∏–µ: FIFO-–æ—á–µ—Ä–µ–¥—å –Ω–∞ GPU

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –°–ö–õ–ê–î –ò–°–ü–†–ê–í–ù–´–• (reserve + serviceable)                    ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  queue_position:  0    1    2    3    4    ...   N         ‚îÇ
‚îÇ                   ‚ñ≤                              ‚ñ≤          ‚îÇ
‚îÇ               —Å—Ç–∞—Ä—ã–µ                          –Ω–æ–≤—ã–µ         ‚îÇ
‚îÇ               (–ø–µ—Ä–≤—ã–µ –Ω–∞ –≤—ã–¥–∞—á—É)            (–ø–æ—Å–ª–µ–¥–Ω–∏–µ)     ‚îÇ
‚îÇ                   ‚îÇ                              ‚îÇ          ‚îÇ
‚îÇ              queue_head                     queue_tail      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏–Ω—Ü–∏–ø FIFO:**
- –°–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã (–ø–æ mfg_date –∏–ª–∏ –ø–æ—Ä—è–¥–∫—É –ø—Ä–∏–±—ã—Ç–∏—è) –≤—ã–¥–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏
- –ù–æ–≤—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–π –∏–Ω–¥–µ–∫—Å `queue_tail + 1`
- UInt32 –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤ (4 –º–ª—Ä–¥ > 10 –ª–µ—Ç √ó 365 –¥–Ω–µ–π √ó 10,000 –∞–≥—Ä–µ–≥–∞—Ç–æ–≤)

### 8.3. –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

**–ê–≥–µ–Ω—Ç:**
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|----------|
| `queue_position` | UInt32 | –ü–æ–∑–∏—Ü–∏—è –≤ FIFO –æ—á–µ—Ä–µ–¥–∏ –≤–Ω—É—Ç—Ä–∏ group_by |

**MacroProperty:**
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------|----------|
| `mp_queue_head[25]` | UInt32 √ó 25 | –ì–æ–ª–æ–≤–∞ –æ—á–µ—Ä–µ–¥–∏ –ø–æ group_by (—Å–ª–µ–¥—É—é—â–∏–π –Ω–∞ –≤—ã–¥–∞—á—É) |
| `mp_queue_tail[25]` | UInt32 √ó 25 | –•–≤–æ—Å—Ç –æ—á–µ—Ä–µ–¥–∏ –ø–æ group_by (—Å–ª–µ–¥—É—é—â–∏–π –∏–Ω–¥–µ–∫—Å –¥–ª—è –Ω–æ–≤—ã—Ö) |
| `mp_replacement_request[MAX_FRAMES]` | UInt32 | aircraft_number –¥–ª—è –∑–∞–º–µ–Ω—ã (0 = –Ω–µ—Ç –∑–∞–ø—Ä–æ—Å–∞) |

### 8.4. –ê–ª–≥–æ—Ä–∏—Ç–º

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (setup_env):**
```python
# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ mfg_date –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π group_by
for group_by in range(3, 25):
    pool_agents = [a for a in agents if a.group_by == group_by and a.state in [reserve, serviceable]]
    pool_agents.sort(key=lambda a: a.mfg_date)
    
    for i, agent in enumerate(pool_agents):
        agent.queue_position = i
    
    mp_queue_head[group_by] = 0                # –ü–µ—Ä–≤—ã–π –Ω–∞ –≤—ã–¥–∞—á—É
    mp_queue_tail[group_by] = len(pool_agents) # –°–ª–µ–¥—É—é—â–∏–π –∏–Ω–¥–µ–∫—Å –¥–ª—è –Ω–æ–≤—ã—Ö
```

**RTC: –ù–µ–∏—Å–ø—Ä–∞–≤–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∑–∞–º–µ–Ω—É:**
```cuda
FLAMEGPU_AGENT_FUNCTION(rtc_request_replacement, ...) {
    const unsigned int ppr = FLAMEGPU->getVariable<unsigned int>("ppr");
    const unsigned int oh = FLAMEGPU->getVariable<unsigned int>("oh");
    const unsigned int sne = FLAMEGPU->getVariable<unsigned int>("sne");
    const unsigned int ll = FLAMEGPU->getVariable<unsigned int>("ll");
    
    // –£—Å–ª–æ–≤–∏–µ –∑–∞–º–µ–Ω—ã: ppr >= oh –ò–õ–ò sne >= ll
    if (ppr >= oh || sne >= ll) {
        const unsigned int my_idx = FLAMEGPU->getVariable<unsigned int>("idx");
        const unsigned int my_ac = FLAMEGPU->getVariable<unsigned int>("aircraft_number");
        
        // –ü–∏—à–µ–º –∑–∞–ø—Ä–æ—Å –≤ MacroProperty
        auto& requests = FLAMEGPU->environment.getMacroProperty<unsigned int, MAX_FRAMES>("mp_replacement_request");
        requests[my_idx] = my_ac;  // –ó–∞–ø—Ä–æ—Å: –Ω—É–∂–Ω–∞ –∑–∞–º–µ–Ω–∞ –¥–ª—è —ç—Ç–æ–≥–æ –±–æ—Ä—Ç–∞
    }
    
    return flamegpu::ALIVE;
}
```

**RTC: –ê–≥—Ä–µ–≥–∞—Ç –∏–∑ –ø—É–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç FIFO-–æ—á–µ—Ä–µ–¥—å:**
```cuda
FLAMEGPU_AGENT_FUNCTION(rtc_check_fifo_assignment, ...) {
    const unsigned int group_by = FLAMEGPU->getVariable<unsigned int>("group_by");
    const unsigned int my_position = FLAMEGPU->getVariable<unsigned int>("queue_position");
    const unsigned int state = cycleVariable...  // reserve –∏–ª–∏ serviceable
    
    // –¢–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç—ã –≤ –ø—É–ª–µ —É—á–∞—Å—Ç–≤—É—é—Ç
    if (state != STATE_RESERVE && state != STATE_SERVICEABLE) {
        return flamegpu::ALIVE;
    }
    
    auto& queue_head = FLAMEGPU->environment.getMacroProperty<unsigned int, 25>("mp_queue_head");
    
    // –ß–∏—Ç–∞–µ–º —Ç–µ–∫—É—â—É—é –≥–æ–ª–æ–≤—É –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –º–æ–µ–π –≥—Ä—É–ø–ø—ã
    unsigned int current_head = queue_head[group_by];
    
    // –ï—Å–ª–∏ –º–æ—è –ø–æ–∑–∏—Ü–∏—è == –≥–æ–ª–æ–≤–∞ ‚Äî —è —Å–ª–µ–¥—É—é—â–∏–π –Ω–∞ –≤—ã–¥–∞—á—É
    if (my_position == current_head) {
        // –ê—Ç–æ–º–∞—Ä–Ω–æ –ø—ã—Ç–∞—é—Å—å "–∑–∞–Ω—è—Ç—å" —Å–ª–æ—Ç
        unsigned int expected = current_head;
        unsigned int result = queue_head[group_by].compare_exchange(expected, current_head + 1);
        
        if (result == expected) {
            // –Ø –≤—ã–∏–≥—Ä–∞–ª! –ò—â—É –∑–∞–ø—Ä–æ—Å –¥–ª—è –º–æ–µ–π –≥—Ä—É–ø–ø—ã –≤ mp_replacement_request
            // ... (—á—Ç–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ aircraft_number, –ø–µ—Ä–µ—Ö–æ–¥ –≤ operations)
        }
    }
    
    return flamegpu::ALIVE;
}
```

**RTC: –ê–≥—Ä–µ–≥–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ø—É–ª (–∏–∑ —Ä–µ–º–æ–Ω—Ç–∞):**
```cuda
FLAMEGPU_AGENT_FUNCTION(rtc_return_to_pool, ...) {
    const unsigned int group_by = FLAMEGPU->getVariable<unsigned int>("group_by");
    
    // –ê—Ç–æ–º–∞—Ä–Ω–æ –ø–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∏–Ω–¥–µ–∫—Å –≤ –æ—á–µ—Ä–µ–¥–∏
    auto& queue_tail = FLAMEGPU->environment.getMacroProperty<unsigned int, 25>("mp_queue_tail");
    unsigned int my_position = queue_tail[group_by].exchange(queue_tail[group_by] + 1);
    
    FLAMEGPU->setVariable<unsigned int>("queue_position", my_position);
    FLAMEGPU->setVariable<unsigned int>("aircraft_number", 0u);  // –°–Ω—è—Ç —Å –±–æ—Ä—Ç–∞
    // state ‚Üí reserve
    
    return flamegpu::ALIVE;
}
```

### 8.5. –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∑–∞–º–µ–Ω—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –î–µ–Ω—å D: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–∏                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –ê–≥—Ä–µ–≥–∞—Ç A (–Ω–∞ –±–æ—Ä—Ç—É 25434):                                ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ ppr = 271,000 >= oh = 270,000                          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ intent_state = 4 (—Ä–µ–º–æ–Ω—Ç)                              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ –ü–∏—à–µ—Ç: mp_replacement_request[A.idx] = 25434           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –î–µ–Ω—å D: FIFO-–≤—ã–±–æ—Ä –∑–∞–º–µ–Ω—ã                                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –ê–≥—Ä–µ–≥–∞—Ç B (–≤ –ø—É–ª–µ, group_by=4):                            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ queue_position = 0 (—Å–∞–º—ã–π —Å—Ç–∞—Ä—ã–π)                      ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ queue_head[4] = 0 ‚Üí B == head ‚Üí B –≤—ã–∏–≥—Ä—ã–≤–∞–µ—Ç           ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ atomicCAS ‚Üí queue_head[4] = 1                          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ –ß–∏—Ç–∞–µ—Ç –∑–∞–ø—Ä–æ—Å ‚Üí aircraft_number = 25434                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –î–µ–Ω—å D+1: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∑–∞–º–µ–Ω—ã                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –ê–≥—Ä–µ–≥–∞—Ç A:                                                 ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ aircraft_number = 0 (—Å–Ω—è—Ç)                             ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ state = repair (–≤ —Ä–µ–º–æ–Ω—Ç)                              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ location = "–°–ö–õ–ê–î"                                     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  –ê–≥—Ä–µ–≥–∞—Ç B:                                                 ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ aircraft_number = 25434 (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)                   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ state = operations                                     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ location = "RA-25434"                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 8.6. –°–≤—è–∑—å —Å assembly_trigger –ø–ª–∞–Ω–µ—Ä–∞

**assembly_trigger** ‚Äî —Å–∏–≥–Ω–∞–ª –æ—Ç –ø–ª–∞–Ω–µ—Ä–∞ –Ω–∞ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—é:
- –ü–ª–∞–Ω–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `repair` ‚Üí —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `assembly_trigger = 1`
- –ê–≥—Ä–µ–≥–∞—Ç—ã –Ω–∞ –ø–ª–∞–Ω–µ—Ä–µ **–æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ** (location = –ø–ª–∞–Ω–µ—Ä, –±–µ–∑ –Ω–∞—Ä–∞–±–æ—Ç–∫–∏ dt=0)
- –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ä–µ–º–æ–Ω—Ç–∞ –ø–ª–∞–Ω–µ—Ä–∞ –∞–≥—Ä–µ–≥–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —Ä–µ—Å—É—Ä—Å
- –ï—Å–ª–∏ –∞–≥—Ä–µ–≥–∞—Ç –∏—Å—á–µ—Ä–ø–∞–ª —Ä–µ—Å—É—Ä—Å ‚Üí –∑–∞–º–µ–Ω–∞ –ø–æ FIFO-–æ—á–µ—Ä–µ–¥–∏
- –ï—Å–ª–∏ –∞–≥—Ä–µ–≥–∞—Ç –∏—Å–ø—Ä–∞–≤–µ–Ω ‚Üí –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –ø–ª–∞–Ω–µ—Ä–µ

**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–Ω—è—Ç–∏—è:**
- –ê–≥—Ä–µ–≥–∞—Ç—ã –Ω–∞ –ø–ª–∞–Ω–µ—Ä–µ –≤ `repair` –ù–ï –º–æ–≥—É—Ç –±—ã—Ç—å —Å–Ω—è—Ç—ã –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–º–æ–Ω—Ç–∞
- –≠—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç—É—Å –ø–ª–∞–Ω–µ—Ä–∞ (–Ω–µ —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–ª–∞–≥ –∞–≥—Ä–µ–≥–∞—Ç–∞)

### 8.7. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è 7-—Ñ–∞–∑–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** FLAMEGPU –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–º–µ—à–∏–≤–∞—Ç—å read –∏ atomic write MacroProperty –≤ –æ–¥–Ω–æ–º —Å–ª–æ–µ.

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ 7 —Ñ–∞–∑ (–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–∏):

| –§–∞–∑–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ | –°–æ—Å—Ç–æ—è–Ω–∏–µ | –û–ø–µ—Ä–∞—Ü–∏—è | MacroProperty |
|------|----------|-----------|----------|---------------|
| P1 | write_request | operations | WRITE | mp_replacement_request/group |
| P2 | read_head | serviceable | READ | mp_queue_head ‚Üí bi_counter |
| P3a | increment_head | serviceable | WRITE | mp_queue_head += 1 |
| P3b | find_request | serviceable | READ | mp_replacement_request ‚Üí repair_days |
| P3c | clear_assign | serviceable | WRITE | requests[idx]=0, aircraft_number |
| RetA | read_tail | reserve | READ | mp_queue_tail ‚Üí repair_days |
| RetB | write_tail | reserve | WRITE | mp_queue_tail += 1, queue_position |

**–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ñ–∞–∑–∞–º–∏ —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `bi_counter`: –º–∞—Ä–∫–µ—Ä —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑—ã (1, 2, 3, 10)
- `repair_days`: –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (found_idx –∏–ª–∏ saved_tail)
- `intent_state`: target_aircraft (–≤ Phase 3c) –∏–ª–∏ next_state

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- 10 –ª–µ—Ç (3650 –¥–Ω–µ–π): **4.59—Å**
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —à–∞–≥–∞: **1.26–º—Å**
- 10634 –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ + 27853 —Ä–µ–∑–µ—Ä–≤ = 38487 frames

### 8.8. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

| –ü–ª—é—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| **–ë–µ–∑ Host** | –í—Å—ë –Ω–∞ GPU, –Ω–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å CPU |
| **FIFO –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω** | –°–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã —É—Ö–æ–¥—è—Ç –ø–µ—Ä–≤—ã–º–∏ |
| **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å** | `compare_exchange` –∏—Å–∫–ª—é—á–∞–µ—Ç –¥—É–±–ª–∏ –∑–∞–º–µ–Ω |
| **UInt32 —Ö–≤–∞—Ç–∏—Ç** | 4 –º–ª—Ä–¥ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ –≤–µ—Å—å –≥–æ—Ä–∏–∑–æ–Ω—Ç —Å–∏–º—É–ª—è—Ü–∏–∏ |
| **–î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–æ** | –ö–∞–∂–¥—ã–π –∞–≥—Ä–µ–≥–∞—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–µ–±—è |
| **–ü—Ä–æ—Å—Ç–∞—è –æ—Ç–ª–∞–¥–∫–∞** | queue_position –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ MP2 |

### 8.8. –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|--------|------------|
| `queue_position` –≤ –∞–≥–µ–Ω—Ç–µ | ‚úÖ DONE | base_model_units.py |
| `mp_queue_head/tail` | ‚úÖ DONE | MacroProperty –ø–æ group_by |
| `mp_replacement_request` | ‚úÖ DONE | –ú–∞—Å—Å–∏–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ MAX_FRAMES |
| –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è FIFO | ‚úÖ DONE | –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ mfg_date |
| –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ spawn | ‚úÖ DONE | –§–æ—Ä–º—É–ª–∞ –æ–±–æ—Ä–æ—Ç–∞ +20% |
| RTC FIFO Phase 1 (write requests) | ‚úÖ DONE | operations ‚Üí mp_replacement_request |
| RTC FIFO Phase 2 (read head) | ‚úÖ DONE | serviceable ‚Üí bi_counter |
| RTC FIFO Phase 3a (increment head) | ‚úÖ DONE | serviceable ‚Üí mp_queue_head |
| RTC FIFO Phase 3b (find request) | ‚úÖ DONE | serviceable ‚Üí repair_days/intent |
| RTC FIFO Phase 3c (clear & assign) | ‚úÖ DONE | serviceable ‚Üí aircraft_number |
| RTC FIFO Return A (read tail) | ‚úÖ DONE | reserve ‚Üí repair_days |
| RTC FIFO Return B (write tail) | ‚úÖ DONE | reserve ‚Üí queue_position |
| –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å assembly_trigger | üî≤ TODO | –°–≤—è–∑—å —Å —Ä–µ–º–æ–Ω—Ç–æ–º –ø–ª–∞–Ω–µ—Ä–∞ |

### 8.9. –§–æ—Ä–º—É–ª–∞ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è spawn

**–ü—Ä–∏–Ω—Ü–∏–ø:** –û–±–æ—Ä–æ—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–æ—Å–ø–æ–ª–Ω–µ–Ω–∏—è +20%.

```python
# –§–æ—Ä–º—É–ª–∞ –æ–±–æ—Ä–æ—Ç–∞ (–ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –∑–∞–º–µ–Ω–µ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –∑–∞ 10 –ª–µ—Ç):
# 1. aggregates_consumed = flight_by_type / ll_aggregate
# 2. aggregates_needed = aggregates_consumed √ó 1.2 (+20% –∑–∞–ø–∞—Å)
# 3. reserve_slots = max(10, aggregates_needed - existing_count)
# 4. CAP: group_reserve ‚â§ existing_count (–∑–∞—â–∏—Ç–∞ –æ—Ç –∞–Ω–æ–º–∞–ª—å–Ω–æ –Ω–∏–∑–∫–∏—Ö LL)

DAYS_10_YEARS = 3650
AVG_DAILY_FLIGHT_MIN = 90  # —Å—Ä–µ–¥–Ω–∏–π –Ω–∞–ª—ë—Ç –≤ –º–∏–Ω—É—Ç–∞—Ö/–¥–µ–Ω—å
SAFETY_MARGIN = 1.2  # +20% –∑–∞–ø–∞—Å

# –ù–∞–ª—ë—Ç –∑–∞ 10 –ª–µ—Ç –ø–æ —Ç–∏–ø–∞–º –í–°
flight_mi8_10y = n_mi8 √ó DAYS_10_YEARS √ó AVG_DAILY_FLIGHT_MIN
flight_mi17_10y = n_mi17 √ó DAYS_10_YEARS √ó AVG_DAILY_FLIGHT_MIN

for group_by, existing_count in group_counts.items():
    ll_group, ac_mask = get_ll_and_mask_for_group(group_by)
    
    # –í—ã–±–æ—Ä –Ω–∞–ª—ë—Ç–∞ –ø–æ ac_type_mask:
    # - 32 (0x20) ‚Üí —Ç–æ–ª—å–∫–æ Mi-8
    # - 64 (0x40) ‚Üí —Ç–æ–ª—å–∫–æ Mi-17
    # - 96 (0x60) ‚Üí —Å—Ä–µ–¥–Ω–µ–µ –æ—Ç –æ–±–æ–∏—Ö
    
    if ll_group > 0:
        aggregates_consumed = flight_10y / ll_group
        aggregates_needed = aggregates_consumed √ó SAFETY_MARGIN
        group_reserve = max(10, int(aggregates_needed - existing_count))
        
        # CAP: –º–∞–∫—Å–∏–º—É–º 100% –æ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö (–∑–∞—â–∏—Ç–∞ –æ—Ç –∞–Ω–æ–º–∞–ª—å–Ω–æ –Ω–∏–∑–∫–∏—Ö LL)
        max_reserve = max(50, existing_count)
        group_reserve = min(group_reserve, max_reserve)
    else:
        group_reserve = max(10, int(existing_count * 0.20))
    
    total_reserve += group_reserve

reserve_slots = max(500, total_reserve)
```

**–ü—Ä–∏–º–µ—Ä (–¥–∞—Ç–∞—Å–µ—Ç 2025-07-04):**
- 10634 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞–≥—Ä–µ–≥–∞—Ç–æ–≤
- 27853 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ (~20% –ø–æ —Ñ–æ—Ä–º—É–ª–µ –æ–±–æ—Ä–æ—Ç–∞)
- 38487 –∏—Ç–æ–≥–æ frames

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ê–≥—Ä–µ–≥–∞—Ç—ã —Ä–∞–∑–Ω—ã–µ ‚Äî CAP –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è.
group_by=33 (LL=40—á) –ø–æ–ª—É—á–∞–µ—Ç 26625 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –ø–æ —Ñ–æ—Ä–º—É–ª–µ –æ–±–æ—Ä–æ—Ç–∞.

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- 10 –ª–µ—Ç —Å–∏–º—É–ª—è—Ü–∏–∏: **5.12—Å** (1.40–º—Å/—à–∞–≥) ‚Äî —Å –º–æ–¥—É–ª—è–º–∏ increment –∏ check_limits
- FIFO –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: 7 —Ñ–∞–∑ (read/write separation)

### 8.10. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è dt –ø–ª–∞–Ω–µ—Ä–æ–≤ —Å –∞–≥—Ä–µ–≥–∞—Ç–∞–º–∏

–ê–≥—Ä–µ–≥–∞—Ç—ã –ø–æ–ª—É—á–∞—é—Ç `dt` (–¥–Ω–µ–≤–Ω–æ–π –Ω–∞–ª—ë—Ç) –æ—Ç –ø–ª–∞–Ω–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ –°–£–ë–î:

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----------|----------|
| `sim_masterv2.dt` | 1 | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–º—É–ª—è—Ü–∏–∏ –ø–ª–∞–Ω–µ—Ä–æ–≤ (569K –∑–∞–ø–∏—Å–µ–π, 972K —á–∞—Å–æ–≤) |
| `flight_program_fl` | 2 | –ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π –Ω–∞–ª—ë—Ç (fallback) |
| Fallback | 3 | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ 90 –º–∏–Ω/–¥–µ–Ω—å |

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è):**
```
[–°–∏–º—É–ª—è—Ü–∏—è –ø–ª–∞–Ω–µ—Ä–æ–≤] ‚Üí sim_masterv2 (ClickHouse)
                            ‚Üì
              planer_dt_loader.py (–∑–∞–≥—Ä—É–∑–∫–∞ dt + state)
                            ‚Üì
              –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞: if state != 2 ‚Üí dt = 0
                            ‚Üì
         mp_planer_dt[day * 400 + idx] (MacroProperty)
                            ‚Üì
               rtc_units_increment.py (GPU)
                            ‚Üì
              sne += dt, ppr += dt –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤
```

**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ dt –ø—Ä–∏ —Ä–µ–º–æ–Ω—Ç–µ:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è `intent_state` –∏–∑ sim_masterv2
- –ï—Å–ª–∏ –ø–ª–∞–Ω–µ—Ä –Ω–µ –≤ operations (state ‚â† 2) ‚Üí dt –æ–±–Ω—É–ª—è–µ—Ç—Å—è
- –ü—Ä–∏–º–µ—Ä: –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ 489 –∑–∞–ø–∏—Å–µ–π (813 —á–∞—Å–æ–≤)

**–ú–æ–¥—É–ª–∏:**
- `planer_dt_loader.py` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ dt –∏–∑ ClickHouse
- `rtc_units_increment.py` ‚Äî RTC —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞ sne/ppr
- `rtc_units_increment.py::rtc_units_check_limits` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ ppr >= oh, sne >= ll

**–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç:**
```cuda
sne += dt;
ppr += dt;
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤:**
```cuda
if (oh > 0 && ppr >= oh) intent_state = 4;  // ‚Üí —Ä–µ–º–æ–Ω—Ç
if (ll > 0 && sne >= ll) intent_state = 6;  // ‚Üí —Å–ø–∏—Å–∞–Ω–∏–µ
if (br > 0 && sne >= br) intent_state = 6;  // ‚Üí breakeven
```

### 8.11. –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ ClickHouse

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–º—É–ª—è—Ü–∏–∏ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `sim_units_v2`:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| version_date | UInt32 | –î–∞—Ç–∞ –≤–µ—Ä—Å–∏–∏ (–¥–Ω–∏ –æ—Ç epoch) |
| day_u16 | UInt16 | –î–µ–Ω—å —Å–∏–º—É–ª—è—Ü–∏–∏ |
| psn | UInt32 | PRIMARY KEY –∞–≥—Ä–µ–≥–∞—Ç–∞ |
| group_by | UInt8 | –¢–∏–ø –∞–≥—Ä–µ–≥–∞—Ç–∞ |
| sne, ppr | UInt32 | –ù–∞—Ä–∞–±–æ—Ç–∫–∏ |
| state | UInt8 | –°–æ—Å—Ç–æ—è–Ω–∏–µ (2-6) |
| aircraft_number | UInt32 | –ù–æ–º–µ—Ä –ø–ª–∞–Ω–µ—Ä–∞ |

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
python3 orchestrator_units.py --version-date 2025-07-04 --steps 3650 --export
```

### 8.12. –¢—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è FIFO

**–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:** 05.01.2026

–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ –∑–∞–º–µ–Ω—É –∞–≥—Ä–µ–≥–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤—É—é –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—É—é –æ—á–µ—Ä–µ–¥—å:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ü–†–ò–û–†–ò–¢–ï–¢ 1: SERVICEABLE (state=3)                              ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  mp_svc_head/tail[group_by]                                      ‚îÇ
‚îÇ  –ì–æ—Ç–æ–≤—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã –Ω–∞ —Å–∫–ª–∞–¥–µ, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ mfg_date              ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  –ü–†–ò–û–†–ò–¢–ï–¢ 2: RESERVE (state=5, active=1)                        ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  mp_rsv_head/tail[group_by]                                      ‚îÇ
‚îÇ  –ê–≥—Ä–µ–≥–∞—Ç—ã –ø–æ—Å–ª–µ —Ä–µ–º–æ–Ω—Ç–∞, –æ–∂–∏–¥–∞—é—â–∏–µ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏              ‚îÇ
‚îÇ  –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è = –∑–∞–ø–∞—Å –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞ —Ä–µ–º–æ–Ω—Ç–∞ (–¥–ª—è –ø–æ—Å—Ç–ø—Ä–æ—Ü.)   ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  –ü–†–ò–û–†–ò–¢–ï–¢ 3: SPAWN (state=5, active=0)                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ  –ù–µ –≤ –æ—á–µ—Ä–µ–¥–∏, –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –ø—É—Å—Ç—ã—Ö –æ—á–µ—Ä–µ–¥—è—Ö                  ‚îÇ
‚îÇ  –ù–æ–≤—ã–π –∞–≥—Ä–µ–≥–∞—Ç: sne=0, ppr=0 ‚Üí serviceable                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**MacroProperty (50 –≥—Ä—É–ø–ø):**
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| `mp_svc_head[50]` | –ì–æ–ª–æ–≤–∞ –æ—á–µ—Ä–µ–¥–∏ serviceable |
| `mp_svc_tail[50]` | –•–≤–æ—Å—Ç –æ—á–µ—Ä–µ–¥–∏ serviceable |
| `mp_rsv_head[50]` | –ì–æ–ª–æ–≤–∞ –æ—á–µ—Ä–µ–¥–∏ reserve |
| `mp_rsv_tail[50]` | –•–≤–æ—Å—Ç –æ—á–µ—Ä–µ–¥–∏ reserve |

**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∞–≥–µ–Ω—Ç–∞:**
| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----|----------|
| `active` | UInt32 | 1 = —Ä–µ–∞–ª—å–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç, 0 = spawn-—Ä–µ–∑–µ—Ä–≤ |
| `queue_position` | UInt32 | –ü–æ–∑–∏—Ü–∏—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –æ—á–µ—Ä–µ–¥–∏ |

**–õ–æ–≥–∏–∫–∞ –∑–∞–º–µ–Ω—ã (RTC):**
```cuda
// –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∑–∞–º–µ–Ω—ã:
if (svc_tail > svc_head) {
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –±–µ—Ä—ë–º –∏–∑ serviceable
    assign_from_serviceable();
} else if (rsv_tail > rsv_head) {
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –±–µ—Ä—ë–º –∏–∑ reserve (–ø–æ—Å–ª–µ —Ä–µ–º–æ–Ω—Ç–∞)
    assign_from_reserve();
} else {
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: spawn –Ω–æ–≤–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–∞
    spawn_new_aggregate();
}
```

**–ü—É—Ç—å –∞–≥—Ä–µ–≥–∞—Ç–∞ –ø–æ—Å–ª–µ —Ä–µ–º–æ–Ω—Ç–∞:**
```
Repair (4) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Reserve (5, active=1) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Operations (2)
  ppr=0              queue_position –≤ rsv       –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∑–∞–º–µ–Ω—ã
                     –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è = –∑–∞–ø–∞—Å
```

**–ü—É—Ç—å spawn –∞–≥—Ä–µ–≥–∞—Ç–∞:**
```
Reserve (5, active=0) ‚îÄ‚ñ∫ Serviceable (3) ‚îÄ‚ñ∫ Operations (2)
    active=1                sne=0, ppr=0      –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ
    queue_position –≤ svc
```

**RTC –º–æ–¥—É–ª–∏:**
| –ú–æ–¥—É–ª—å | –§—É–Ω–∫—Ü–∏–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|---------|----------|
| `rtc_units_fifo_priority.py` | 4 —Ñ—É–Ω–∫—Ü–∏–∏ | –¢—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è FIFO |
| `rtc_fifo_assign_serviceable` | serviceable | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 |
| `rtc_fifo_assign_reserve` | reserve (active=1) | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 |
| `rtc_fifo_spawn` | reserve (active=0) | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 |
| `rtc_fifo_return_to_rsv` | reserve | –í–æ–∑–≤—Ä–∞—Ç –ø–æ—Å–ª–µ —Ä–µ–º–æ–Ω—Ç–∞ |

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ø—É–ª—è—Ü–∏–∏:**
- –†–µ–∞–ª—å–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã: `active=1`, `queue_position` –≤ svc/rsv –æ—á–µ—Ä–µ–¥–∏
- Spawn-—Ä–µ–∑–µ—Ä–≤: `active=0`, `queue_position=0` (–Ω–µ –≤ –æ—á–µ—Ä–µ–¥–∏)
- Spawn-—Ä–µ–∑–µ—Ä–≤ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ä–∞–∑–º–µ—Ä—É –≥—Ä—É–ø–ø—ã (~27,000 —Å–ª–æ—Ç–æ–≤)

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- 100 —à–∞–≥–æ–≤: 13.5—Å (—Å –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π —è–¥–µ—Ä)
- 3650 —à–∞–≥–æ–≤: ~8 –º–∏–Ω (—Å –∫—ç—à–µ–º —è–¥–µ—Ä)

**–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:** 05.01.2026
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 05.01.2026 (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è dt, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, —ç–∫—Å–ø–æ—Ä—Ç, —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è FIFO)


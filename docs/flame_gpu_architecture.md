# FLAME GPU –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 28-07-2025  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 21-08-2025  
**–ê–≤—Ç–æ—Ä:** Helicopter Component Lifecycle Project Team

## üéØ **–ù–ê–ó–ù–ê–ß–ï–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê**

–û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ FLAME GPU —Å–∏–º—É–ª—è—Ü–∏–π –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å persistent —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ ETL –ø–∞–π–ø–ª–∞–π–Ω –ø—Ä–æ–µ–∫—Ç–∞ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –≤–µ—Ä—Ç–æ–ª–µ—Ç–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

---

## üìã **–ü–†–û–ë–õ–ï–ú–ê–¢–ò–ö–ê –ò –¶–ï–õ–ò**

### **–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**
FLAME GPU Environment —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Python —Å–∫—Ä–∏–ø—Ç–∞ - GPU –ø–∞–º—è—Ç—å —Å—Ç–∏—Ä–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞.

### **–ë–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**
1. **Persistent —Å–∏–º—É–ª—è—Ü–∏—è**: –ó–∞–≥—Ä—É–∑–∫–∞ MacroProperty ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ ‚Üí —Å–∏–º—É–ª—è—Ü–∏—è ‚Üí —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ MacroProperty2 ‚Üí –≤—ã–≥—Ä—É–∑–∫–∞ —Å field_id
2. **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –≤—ã–≥—Ä—É–∑–æ–∫** –≤ –°–£–ë–î –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
3. **–õ–æ–≥–∏–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤** –¥–æ–ª–∂–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å BI** —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä–∏ —Å field_id –º–∞–ø–ø–∏–Ω–≥–æ–º
5. **–ü–æ—ç—Ç–∞–ø–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**
- FLAME GPU –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CUDA –ø–∞–º—è—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞
- Python –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è ‚Üí GPU –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ state management –º–µ–∂–¥—É –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏
- –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ GPU –ø–∞–º—è—Ç—å –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üèóÔ∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ù–û–ï –†–ï–®–ï–ù–ò–ï**

### **–í—ã–±—Ä–∞–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω: Persistent GPU Service + State Checkpoints**

–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö GPU –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤:

1. **Persistent FLAME GPU Service** - –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π —Å–µ—Ä–≤–∏—Å
2. **State Checkpoint Manager** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
3. **Pipeline Orchestrator** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ø–∞–º–∏ —Å–∏–º—É–ª—è—Ü–∏–∏
4. **ClickHouse Integration Layer** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –°–£–ë–î

---

## üîß **–ö–û–ú–ü–û–ù–ï–ù–¢–´ –ê–†–•–ò–¢–ï–ö–¢–£–†–´**

### **1. FLAME GPU Persistent Service**
```
flame_gpu_service.py
‚îú‚îÄ‚îÄ GPU Memory Manager
‚îú‚îÄ‚îÄ Environment State Controller  
‚îú‚îÄ‚îÄ Agent Population Manager
‚îú‚îÄ‚îÄ Simulation Engine Controller
‚îî‚îÄ‚îÄ Checkpoint Save/Restore
```

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ FLAME GPU –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GPU –ø–∞–º—è—Ç—å—é –∏ –∞–≥–µ–Ω—Ç–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –æ—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π

### **2. Pipeline Orchestrator**
```
simulation_orchestrator.py
‚îú‚îÄ‚îÄ Stage Controller
‚îú‚îÄ‚îÄ Service Communication
‚îú‚îÄ‚îÄ Error Recovery
‚îú‚îÄ‚îÄ Progress Monitoring
‚îî‚îÄ‚îÄ Resource Management
```

**–≠—Ç–∞–ø—ã –ø–∞–π–ø–ª–∞–π–Ω–∞:**
1. **Load Stage**: –ó–∞–≥—Ä—É–∑–∫–∞ MacroProperty1-5 + Property
2. **Agent Creation**: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤
3. **Simulation Stage**: –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏
4. **Result Export**: –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ MacroProperty2
5. **BI Integration**: –í—ã–≥—Ä—É–∑–∫–∞ —Å field_id –º–∞–ø–ø–∏–Ω–≥–æ–º

### **3. State Checkpoint Manager**
```
checkpoint_manager.py
‚îú‚îÄ‚îÄ GPU State Serializer
‚îú‚îÄ‚îÄ ClickHouse State Storage
‚îú‚îÄ‚îÄ Recovery Controller
‚îú‚îÄ‚îÄ Version Management
‚îî‚îÄ‚îÄ Integrity Checker
```

**Checkpoint —Ç–∏–ø—ã:**
- **Environment Checkpoint**: MacroProperty, Property, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **Agent Population Checkpoint**: –°–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
- **Simulation Progress**: –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–º—É–ª—è—Ü–∏–∏
- **Result Checkpoint**: MacroProperty2 –ø–µ—Ä–µ–¥ –≤—ã–≥—Ä—É–∑–∫–æ–π

### **4. ClickHouse Integration Layer**
```
clickhouse_integration.py
‚îú‚îÄ‚îÄ Dictionary Manager
‚îú‚îÄ‚îÄ Field ID Mapper
‚îú‚îÄ‚îÄ Batch Processor
‚îú‚îÄ‚îÄ BI Connector
‚îî‚îÄ‚îÄ Data Validator
```

---

## üöÄ **–ü–û–≠–¢–ê–ü–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø**

### **–≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (1-2 –Ω–µ–¥–µ–ª–∏)**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
code/simulation/
‚îú‚îÄ‚îÄ flame_gpu_service.py          # Persistent GPU —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ simulation_orchestrator.py    # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø–∞–π–ø–ª–∞–π–Ω–∞
‚îú‚îÄ‚îÄ checkpoint_manager.py         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
‚îî‚îÄ‚îÄ config/
    ‚îú‚îÄ‚îÄ service_config.yaml       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
    ‚îî‚îÄ‚îÄ simulation_params.yaml    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–º—É–ª—è—Ü–∏–∏
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 1:**
- –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ Persistent Service
- –ó–∞–≥—Ä—É–∑–∫–∞ MacroProperty –±–µ–∑ –≤—ã–≥—Ä—É–∑–∫–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ checkpoint'–æ–≤
- –ë–∞–∑–æ–≤–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### **–≠—Ç–∞–ø 2: Agent Management (1-2 –Ω–µ–¥–µ–ª–∏)**
```bash
# –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞–º–∏
code/simulation/agents/
‚îú‚îÄ‚îÄ agent_factory.py             # –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ population_manager.py        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ø—É–ª—è—Ü–∏–µ–π
‚îú‚îÄ‚îÄ agent_state_controller.py    # –°–æ—Å—Ç–æ—è–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ lifecycle_logic.py           # –õ–æ–≥–∏–∫–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 2:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ MacroProperty
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- Checkpoint –∞–≥–µ–Ω—Ç—Å–∫–æ–π –ø–æ–ø—É–ª—è—Ü–∏–∏
- Memory management –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø–æ–ø—É–ª—è—Ü–∏–π

### **–≠—Ç–∞–ø 3: Simulation Engine (2-3 –Ω–µ–¥–µ–ª–∏)**
```bash
# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏
code/simulation/engine/
‚îú‚îÄ‚îÄ simulation_controller.py     # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–∏–º—É–ª—è—Ü–∏–∏
‚îú‚îÄ‚îÄ step_processor.py            # –û–±—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–æ–≤
‚îú‚îÄ‚îÄ result_collector.py          # –°–±–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îî‚îÄ‚îÄ macroproperty2_builder.py    # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ MacroProperty2
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 3:**
- –ü—Ä–æ—Å—Ç—ã–µ —Å–∏–º—É–ª—è—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å MacroProperty2
- Performance —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Checkpoint –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### **–≠—Ç–∞–ø 4: BI Integration (1-2 –Ω–µ–¥–µ–ª–∏)**
```bash
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å BI
code/simulation/bi/
‚îú‚îÄ‚îÄ field_id_mapper.py           # –ú–∞–ø–ø–∏–Ω–≥ field_id
‚îú‚îÄ‚îÄ bi_exporter.py               # –≠–∫—Å–ø–æ—Ä—Ç –≤ BI —Ñ–æ—Ä–º–∞—Ç
‚îú‚îÄ‚îÄ dictionary_updater.py        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–µ–π
‚îî‚îÄ‚îÄ quality_validator.py         # –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≠—Ç–∞–ø–∞ 4:**
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å field_id –º–∞–ø–ø–∏–Ω–≥–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–ª–æ–≤–∞—Ä—è–º–∏
- End-to-end —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞
- Performance –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

---

## üîÑ **–ö–û–ú–ú–£–ù–ò–ö–ê–¶–ò–û–ù–ù–´–ï –ü–†–û–¢–û–ö–û–õ–´**

### **Inter-Service Communication**
```python
# RESTful API –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
POST /flame-gpu/load-macroproperty    # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
POST /flame-gpu/create-agents         # –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤  
POST /flame-gpu/run-simulation        # –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏
POST /flame-gpu/export-results        # –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
GET  /flame-gpu/status                # –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
POST /flame-gpu/checkpoint/save       # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
POST /flame-gpu/checkpoint/restore    # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```

### **Message Queue (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
```python
# –î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –∑–∞–¥–∞—á
Queue: simulation.macroproperty.load
Queue: simulation.agents.create
Queue: simulation.run.execute  
Queue: simulation.results.export
```

---

## üìä **–ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –ú–ï–¢–†–ò–ö–ò**

### **Key Performance Indicators**
- **GPU Memory Usage**: % –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è GPU –ø–∞–º—è—Ç–∏
- **Agent Population Size**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
- **Simulation Steps/sec**: –°–∫–æ—Ä–æ—Å—Ç—å —Å–∏–º—É–ª—è—Ü–∏–∏
- **Checkpoint Size/Time**: –†–∞–∑–º–µ—Ä –∏ –≤—Ä–µ–º—è checkpoint'–æ–≤
- **End-to-End Latency**: –í—Ä–µ–º—è –ø–æ–ª–Ω–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞

### **Logging Strategy**
```python
# –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logs/simulation/
‚îú‚îÄ‚îÄ flame_gpu_service_{timestamp}.log
‚îú‚îÄ‚îÄ orchestrator_{timestamp}.log
‚îú‚îÄ‚îÄ checkpoint_manager_{timestamp}.log
‚îî‚îÄ‚îÄ bi_integration_{timestamp}.log
```

---

## üõ°Ô∏è **ERROR RECOVERY & RESILIENCE**

### **Failure Scenarios**
1. **GPU Service Crash**: Restart + –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ checkpoint
2. **Out of Memory**: Batch processing + memory optimization
3. **Simulation Divergence**: Rollback –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É checkpoint
4. **ClickHouse Connection Loss**: Retry with exponential backoff

### **Recovery Strategies**
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
try:
    result = flame_gpu_service.run_simulation()
except GPUMemoryError:
    checkpoint_manager.save_current_state()
    flame_gpu_service.optimize_memory()
    flame_gpu_service.restore_from_checkpoint()
    result = flame_gpu_service.run_simulation(batch_mode=True)
```

---

## üîó **–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú ETL**

### **Integration Points**
1. **Extract Stage**: –î–∞–Ω–Ω—ã–µ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω–æ
2. **Transform Stage**: 
   - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –≤—ã–≥—Ä—É–∑–æ–∫ MacroProperty
   - –ê–∫—Ç–∏–≤–∞—Ü–∏—è Persistent Service
   - –ó–∞–ø—É—Å–∫ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–∏–º—É–ª—è—Ü–∏–∏
3. **Load Stage**: –ó–∞–≥—Ä—É–∑–∫–∞ MacroProperty2 —Å field_id –≤ ClickHouse

### **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
```python
# Fallback –Ω–∞ —Ç–µ–∫—É—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
if ENABLE_PERSISTENT_SIMULATION:
    orchestrator = SimulationOrchestrator()
    result = orchestrator.run_full_pipeline()
else:
    # –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥: –æ—Ç–¥–µ–ª—å–Ω—ã–µ loader/exporter
    loader = FlameMacroPropertyLoader()
    result = loader.run_loading_process()
```

---

## üìà **EXPECTED BENEFITS**

### **Performance Gains**
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫**: ~60% —ç–∫–æ–Ω–æ–º–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
- **Persistent GPU –∫–æ–Ω—Ç–µ–∫—Å—Ç**: ~40% —ç–∫–æ–Ω–æ–º–∏–∏ –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **Batch processing**: ~80% —É–ª—É—á—à–µ–Ω–∏–µ throughput –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### **Operational Benefits**
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ deployment**: –û–¥–∏–Ω persistent —Å–µ—Ä–≤–∏—Å –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤
- **–õ—É—á—à–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Easier debugging**: Checkpoint'—ã –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
- **Scalability**: –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ GPU workers

---

## üéØ **NEXT STEPS**

1. **–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** —Å –∫–æ–º–∞–Ω–¥–æ–π –ø—Ä–æ–µ–∫—Ç–∞
2. **–°–æ–∑–¥–∞–Ω–∏–µ MVP** (–≠—Ç–∞–ø 1) –¥–ª—è proof of concept
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å —Ç–µ–∫—É—â–∏–º ETL –ø–∞–π–ø–ª–∞–π–Ω–æ–º
4. **–ü–æ—ç—Ç–∞–ø–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
5. **Production deployment** —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏

---

## üìö **REFERENCES**

- FLAME GPU 2.0 Documentation: Environment Management
- GPU Computing Best Practices: Persistent Services
- Microservices Patterns: State Management in Distributed Systems
- ClickHouse Integration: High-Performance Data Pipelines
- CUDA Programming Guide: Memory Management Strategies

---

*–î–æ–∫—É–º–µ–Ω—Ç –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø–æ–ª—É—á–µ–Ω–∏—è feedback –æ—Ç –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.* 

---

## ‚öôÔ∏è –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞: –º–æ–¥—É–ª—å–Ω—ã–π –ø–ª–∞–Ω (21-08-2025)

### –ú–æ–¥—É–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞ (–∫–æ–¥ –±—É–¥–µ—Ç –≤ –ø–∞–ø–∫–µ `code/`)
```
sim_env_setup.py      # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Environment: –¥–∞—Ç—ã (ordinals), –∞—Ç–æ–º–∞—Ä–Ω–∞—è –∫–≤–æ—Ç–∞, –º–∞—Å—Å–∏–≤—ã —Å—É—Ç–æ—á–Ω—ã—Ö —á–∞—Å–æ–≤
sim_agent_factory.py  # –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ MP3 (–ø–µ—Ä–µ–Ω–æ—Å –ø–æ–ª–µ–π –≤ agent vars)
sim_layers_mi8.py     # –°–ª–æ–∏ —Å—É—Ç–æ–∫ –¥–ª—è group_by=1: 4 ‚Üí 6 ‚Üí 2 ‚Üí 3 ‚Üí 5 ‚Üí 1
sim_logging_mp2.py    # –ü–æ–¥—Å—á—ë—Ç ops_current_* –∏ –µ–¥–∏–Ω—ã–π –±–∞—Ç—á‚Äë—ç–∫—Å–ø–æ—Ä—Ç MP2 –∑–∞ —Å—É—Ç–∫–∏
sim_runner.py         # –î–Ω–µ–≤–Ω–æ–π —Ü–∏–∫–ª: –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –≤—Ö–æ–¥–æ–≤ –¥–Ω—è ‚Üí —Å–ª–æ–∏ ‚Üí —ç–∫—Å–ø–æ—Ä—Ç
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–ª–∞–Ω –∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø–æ—Å–ª–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `code/`.

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö)
- MP1 (`md_components`): `repair_time`, `partout_time`, `assembly_time`, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è ‚Äî —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ.
- MP3 (`heli_pandas`): —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤ (`status_id`, `sne`, `ppr`, `repair_days`, `mfg_date`, `version_date`, `version_id`, `aircraft_number`, `group_by`, `ll`, `oh`, `oh_threshold`, `ac_type_mask`) ‚Äî —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤.
- MP4 (`flight_program_ac`): `ops_counter_mi8/mi17` –ø–æ –¥–∞—Ç–∞–º ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –∫–≤–æ—Ç—ã –Ω–∞ D+1.
- MP5 (`flight_program_fl`): `daily_hours` –ø–æ `(aircraft_number, dates)` ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ —Å—É—Ç–æ—á–Ω—ã—Ö —á–∞—Å–æ–≤ –¥–ª—è D –∏ D+1.

### –ù–æ–≤—ã–µ Environment —Å–≤–æ–π—Å—Ç–≤–∞ (—Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏)
- `current_date_ord` (UInt16): –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –¥–µ–Ω—å D.
- `next_date_ord` (UInt16): D+1.
- `remaining_ops_next_mi8` (UInt16): –µ–¥–∏–Ω—ã–π –∞—Ç–æ–º–∞—Ä–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –∫–≤–æ—Ç—ã —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –Ω–∞ D+1 –¥–ª—è group_by=1; –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ –Ω–∞—á–∞–ª–µ —Å—É—Ç–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–µ–º `ops_counter_mi8(D+1)`; –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞—Ç–æ–º–∞—Ä–Ω–æ.
- `daily_hours_today[idx]` (UInt32): —á–∞—Å—ã –Ω–∞–ª—ë—Ç–∞ –Ω–∞ D –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É (–º–∞–ø–ø–∏–Ω–≥ –∏–∑ MP5 –ø–æ `aircraft_number`).
- `daily_hours_next[idx]` (UInt32): —á–∞—Å—ã –Ω–∞–ª—ë—Ç–∞ –Ω–∞ D+1 –¥–ª—è –∞–≥–µ–Ω—Ç–∞.

### –ê–≥–µ–Ω—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∏–∑ MP3, –¥–∞–ª–µ–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è —Å–ª–æ—è–º–∏)
- –ë–∞–∑–æ–≤—ã–µ: `status_id` (UInt8), `sne` (UInt32), `ppr` (UInt32), `repair_days` (UInt16), `mfg_date_ord` (UInt16), `version_date_ord` (UInt16), `aircraft_number` (UInt32), `group_by` (UInt8), `ac_type_mask` (UInt8), `ll` (UInt32), `oh` (UInt32), `oh_threshold` (UInt32).
- –¢—Ä–∏–≥–≥–µ—Ä—ã (–∏–∑–º–µ–Ω—è–µ–º—ã–µ –≤ —Å–ª–æ—è—Ö): `active_trigger_ord` (UInt16), `assembly_trigger_ord` (UInt16), `partout_trigger_ord` (UInt16).

### –î–Ω–µ–≤–Ω–æ–π —Ü–∏–∫–ª (group_by=1)
1) –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–Ω—è (Host): —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `current_date_ord`, `next_date_ord`; –∑–∞–¥–∞—Ç—å `remaining_ops_next_mi8 := ops_counter_mi8(D+1)`; –∑–∞–≥—Ä—É–∑–∏—Ç—å `daily_hours_today/next` –ø–æ MP5.
2) –°–ª–æ–∏ –Ω–∞ D (GPU): 4 (—Ä–µ–º–æ–Ω—Ç) ‚Üí 6 (—Ö—Ä–∞–Ω–µ–Ω–∏–µ) ‚Üí 2 (—ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è) ‚Üí 3 (–∏—Å–ø—Ä–∞–≤–µ–Ω) ‚Üí 5 (—Ä–µ–∑–µ—Ä–≤) ‚Üí 1 (–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω). –ê—Ç–æ–º–∏–∫–∏ —Ä–∞—Å—Ö–æ–¥—É—é—Ç —Ç–æ–ª—å–∫–æ `remaining_ops_next_mi8`.
3) –§–∏–Ω–∞–ª D (Host): –ø–æ—Å—á–∏—Ç–∞—Ç—å `ops_current_mi8(D)` –∫–∞–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≥–µ–Ω—Ç–æ–≤ —Å–æ `status_id=2` –Ω–∞ –∫–æ–Ω–µ—Ü D –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–∏–Ω –±–∞—Ç—á‚Äë—ç–∫—Å–ø–æ—Ä—Ç MP2.

### –í–∞–∂–Ω—ã–µ –æ–≥–æ–≤–æ—Ä–∫–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ClickHouse –∫–ª–∏–µ–Ω—Ç–∞ –≤–Ω—É—Ç—Ä–∏ —Å–∏–º—É–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π: –¥–∞–Ω–Ω—ã–µ MP/Property —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Ä–∞–Ω–µ–µ –≤ —Ä–∞–º–∫–∞—Ö `transform_master`.
- –ù–æ–≤—ã–µ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è MP2; –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—é.

---

## üß™ NVRTC/Jitify: —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–∞ –æ—Ç–ª–∞–¥–∫–∏ (21-08-2025)

- **–°–∏–º–ø—Ç–æ–º:** –ø–∞–¥–µ–Ω–∏–µ –Ω–∞ `setPopulationData()` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º Jitify ¬´Error compiling runtime agent function ('rtc_repair')¬ª. –ú–∏–Ω–∏‚Äë—Ç–µ—Å—Ç—ã RTC –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –ø–æ–ª–Ω–æ–π –º–æ–¥–µ–ª–∏ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è.
- **–ü—Ä–∏—á–∏–Ω–∞ (–≤—ã–≤–æ–¥):** –Ω–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ CUDA (–≤ WSL –Ω–∞–π–¥–µ–Ω–æ `/usr/local/cuda/include/cuda_runtime.h`, –¥–æ–±–∞–≤–ª–µ–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–π fallback `CUDA_PATH`), –∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–æ–¥–µ–ª–∏ ‚Äî –ø–æ—Ä—è–¥–æ–∫/–Ω–∞–±–æ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π RTC/—Å–ª–æ—ë–≤ –∏ –∞–≥–µ–Ω—Ç–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –í –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–∞—Ä–∫–∞—Å–µ RTC –ø—Ä–æ—Ö–æ–¥–∏—Ç; –≤ –ø–æ–ª–Ω–æ–π –º–æ–¥–µ–ª–∏ ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø—Ä–∏ –ª–∏–Ω–∫–æ–≤–∫–µ –Ω–∞–±–æ—Ä–∞ RTC –ø–µ—Ä–µ–¥ –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π.
- **–ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏:**
  - –î–æ–±–∞–≤–ª–µ–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–π fallback `CUDA_PATH` –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É `.env` (–ø–æ–∏—Å–∫ `/usr/local/cuda*` —Å `include/cuda_runtime.h`).
  - –í–≤–µ–¥–µ–Ω—ã —Ä–µ–∂–∏–º—ã –æ—Ç–ª–∞–¥–∫–∏: `HOST_ONLY_SIM` (–±—ã—Å—Ç—Ä–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞), `FLAMEGPU_PROBE` (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ RTC –ø—Ä–æ–≤–µ—Ä–∫–∏), `LAYER_MODE=repair_only` (–ø–æ—à–∞–≥–æ–≤–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å–ª–æ—ë–≤ –≤ –ø–æ–ª–Ω–æ–π –º–æ–¥–µ–ª–∏).
  - –£–±—Ä–∞–Ω—ã –Ω–∞—Å–ª–µ–¥–∏—è `status_change`: —Ä–µ–º–æ–Ω—Ç 4‚Üí5 –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é (—Å–±—Ä–æ—Å `ppr`, `repair_days`).
- **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:**
  - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ RTC —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–≤ —Ç.—á. —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º agent variables).
  - –í –ø–æ–ª–Ω–æ–º —Ä–∞–Ω–Ω–µ—Ä–µ –≤–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏—è —Å–ª–æ—ë–≤ `LAYER_MODE=repair_only`; –¥–∞–ª—å–Ω–µ–π—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Äî –ø–æ –æ–¥–Ω–æ–º—É —Å–ª–æ—é.
- **–ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:**
  1) –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é agent variables –¥–æ –≤—Å–µ—Ö `newRTCFunction`.
  2) –ü—Ä–æ–≥–æ–Ω `rtc_repair` ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å MP2 –∑–∞ D0.
  3) –î–æ–±–∞–≤–∏—Ç—å `rtc_main` (–±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–π/–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞) ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è `sne/ppr`.
  4) –ü–æ–¥–∫–ª—é—á–∏—Ç—å `rtc_ops_check` (–æ–∫–Ω–∞ LL/OH) ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã 2‚Üí4/6 –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã.
  5) –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –∞—Ç–æ–º–∞—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ; —ç–∫—Å–ø–æ—Ä—Ç MP2 –æ—Å—Ç–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ü–µ –¥–Ω—è (–æ–¥–∏–Ω –±–∞—Ç—á).
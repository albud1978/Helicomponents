{
  "rtc_function": "fn_spawn_mi17",
  "aircraft_type": "МИ-17",
  "ac_type_mask": 64,
  "execution_condition": "new_counter_mi17 > 0",
  
  "macroproperty_sources": [
    {"name": "new_counter_mi17", "type": "MacroProperty4", "field_id": 77}
  ],
  
  "spawn_logic": {
    "quantity": "new_counter_mi17",
    "target_status": 3,
    "description": "Создание множественных новых агентов МИ-17 в статусе Исправен"
  },
  
  "new_agent_template": {
    "status_id": 3,
    "psn": "MAX(MacroProperty3.psn) + sequence_number",
    "sne": 0,
    "ppr": 0,
    "repair_days": 0,
    "mfg_date": "current_date",
    "lease_restricted": 1,
    "address_i": 17094,
    "partseqno_i": 70482,
    "ac_type_mask": 64,
    "aircraft_number": "MAX(agents.aircraft_number OR MacroProperty3.aircraft_number) + sequence_number"
  },
  
  "macroproperty_sources_for_new_agents": [
    {
      "name": "ll",
      "source": "MacroProperty1[partno_comp=70482].ll_mi17",
      "type": "MacroProperty1",
      "field_id": 26
    },
    {
      "name": "oh", 
      "source": "MacroProperty1[partno_comp=70482].oh_mi17",
      "type": "MacroProperty1", 
      "field_id": 34
    }
  ],
  
  "aircraft_number_range": {
    "min": 100000,
    "max": 150000,
    "description": "Диапазон номеров ВС для МИ-17"
  },
  
  "post_spawn_actions": [
    {
      "name": "reset_counter",
      "action": "new_counter_mi17 = 0",
      "description": "Сброс счетчика после создания агентов"
    },
    {
      "name": "expand_macroproperty3",
      "action": "add_new_rows_to_macroproperty3",
      "description": "Добавление новых строк в MacroProperty3 для созданных агентов"
    }
  ],
  
  "variables": {
    "output": [
      {"name": "status_id", "type": "Variable", "target": "new_agent", "value": 3},
      {"name": "psn", "type": "Variable", "target": "new_agent", "action": "auto_increment"},
      {"name": "aircraft_number", "type": "Variable", "target": "new_agent", "action": "auto_increment"},
      {"name": "sne", "type": "Variable", "target": "new_agent", "value": 0},
      {"name": "ppr", "type": "Variable", "target": "new_agent", "value": 0},
      {"name": "repair_days", "type": "Variable", "target": "new_agent", "value": 0}
    ]
  }
}